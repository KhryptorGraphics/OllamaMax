# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/discovery [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/discovery.test]
pkg/p2p/discovery/optimized_strategies_test.go:18:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:61:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:89:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:123:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:170:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:216:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:240:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:278:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:301:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:352:15: undefined: test.GenHostSwarm
pkg/p2p/discovery/optimized_strategies_test.go:352:15: too many errors
# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/api [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/api.test]
pkg/api/server_test.go:149:35: cannot use mockP2P (variable of type *MockP2PNode) as *p2p.Node value in argument to NewServer
pkg/api/server_test.go:149:44: cannot use mockConsensus (variable of type *MockConsensusEngine) as *consensus.Engine value in argument to NewServer
pkg/api/server_test.go:149:59: cannot use mockScheduler (variable of type *MockSchedulerEngine) as *scheduler.Engine value in argument to NewServer
pkg/api/server_test.go:765:16: not enough arguments in call to hub.Broadcast
	have (map[string]interface{})
	want (string, interface{})
pkg/api/server_test.go:809:15: server.Shutdown undefined (type *Server has no field or method Shutdown)
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/api [build failed]
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/autoscaling		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/cache		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/config		coverage: 0.0% of statements
# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.test]
pkg/p2p/host/host_integration_test.go:194:2: invalid operation: natManager (variable of type *"github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat".NATTraversalManager) is not an interface
pkg/p2p/host/host_integration_test.go:227:35: metrics.HolePunchAttempts undefined (type *"github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat".TraversalMetrics has no field or method HolePunchAttempts)
# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler.test]
pkg/scheduler/enhanced_distributed_scheduler_test.go:15:6: TestEnhancedDistributedScheduler redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_simple_test.go:12:6: other declaration of TestEnhancedDistributedScheduler
pkg/scheduler/enhanced_scheduler_test.go:17:6: mockP2PNode redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_test.go:443:6: other declaration of mockP2PNode
pkg/scheduler/enhanced_scheduler_test.go:19:23: method mockP2PNode.ID already declared at pkg/scheduler/enhanced_distributed_scheduler_test.go:445:23
pkg/scheduler/enhanced_scheduler_test.go:22:6: mockConsensusEngine redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_test.go:448:6: other declaration of mockConsensusEngine
pkg/scheduler/enhanced_scheduler_test.go:24:31: method mockConsensusEngine.IsLeader already declared at pkg/scheduler/enhanced_distributed_scheduler_test.go:450:31
pkg/scheduler/enhanced_scheduler_test.go:25:31: method mockConsensusEngine.Leader already declared at pkg/scheduler/enhanced_distributed_scheduler_test.go:451:31
pkg/scheduler/enhanced_scheduler_test.go:28:6: TestEnhancedDistributedScheduler redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_simple_test.go:12:6: other declaration of TestEnhancedDistributedScheduler
pkg/scheduler/enhanced_scheduler_test.go:297:6: TestPerformanceTracker redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_test.go:127:6: other declaration of TestPerformanceTracker
pkg/scheduler/enhanced_scheduler_test.go:357:6: TestSchedulingAdvisor redeclared in this block
	pkg/scheduler/enhanced_distributed_scheduler_test.go:264:6: other declaration of TestSchedulingAdvisor
pkg/scheduler/enhanced_distributed_scheduler_simple_test.go:58:3: unknown field Config in struct literal of type partitioning.PartitionManager, but does have unexported config
pkg/scheduler/enhanced_distributed_scheduler_simple_test.go:58:3: too many errors
# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/security [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/security.test]
pkg/security/auth_test.go:37:37: cannot use cfg (variable of type *config.SecurityConfig) as *SecurityConfig value in argument to NewSecurityManager
pkg/security/auth_test.go:47:28: manager.GenerateSelfSignedCert undefined (type *SecurityManager has no field or method GenerateSelfSignedCert)
pkg/security/auth_test.go:71:37: cannot use cfg (variable of type *config.SecurityConfig) as *SecurityConfig value in argument to NewSecurityManager
pkg/security/auth_test.go:88:21: manager.JWTMiddleware undefined (type *SecurityManager has no field or method JWTMiddleware)
pkg/security/auth_test.go:125:37: cannot use cfg (variable of type *config.SecurityConfig) as *SecurityConfig value in argument to NewSecurityManager
pkg/security/auth_test.go:131:10: manager.AddAPIKey undefined (type *SecurityManager has no field or method AddAPIKey)
pkg/security/auth_test.go:136:21: manager.APIKeyMiddleware undefined (type *SecurityManager has no field or method APIKeyMiddleware)
pkg/security/auth_test.go:167:3: unknown field RateLimit in struct literal of type config.SecurityConfig
pkg/security/auth_test.go:169:4: unknown field RequestsPerMinute in struct literal of type config.RateLimitConfig
pkg/security/auth_test.go:170:4: unknown field BurstSize in struct literal of type config.RateLimitConfig
pkg/security/auth_test.go:167:3: too many errors
# github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/fault_tolerance [github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/fault_tolerance.test]
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:595:13: undefined: PredictionSample
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:606:36: undefined: PredictionSample
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:673:33: cannot use config (variable of type *EnhancedFaultToleranceConfig) as *FaultToleranceManager value in argument to NewSelfHealingEngine
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:673:41: cannot use baseManager (variable of type *FaultToleranceManager) as *SelfHealingConfig value in argument to NewSelfHealingEngine
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:686:12: engine.interval undefined (type *SelfHealingEngine has no field or method interval)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:687:79: engine.interval undefined (type *SelfHealingEngine has no field or method interval)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:691:12: engine.threshold undefined (type *SelfHealingEngine has no field or method threshold)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:692:81: engine.threshold undefined (type *SelfHealingEngine has no field or method threshold)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:701:16: engine.strategyWeights undefined (type *SelfHealingEngine has no field or method strategyWeights)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:711:13: engine.learning undefined (type *SelfHealingEngine has no field or method learning)
pkg/scheduler/fault_tolerance/enhanced_fault_tolerance_test.go:711:13: too many errors
=== RUN   TestEngine_NewEngine
=== RUN   TestEngine_NewEngine/valid_config
2025/08/10 17:59:58 Added STUN server: stun.l.google.com:19302
2025/08/10 17:59:58 Added STUN server: stun1.l.google.com:19302
2025/08/10 17:59:58 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:00 P2P host created with ID: QmexcqmazLBunJawFRiHkk8PjamWSp8488D89XEqASgrPg
2025/08/10 18:00:00 Listen addresses: [/ip4/127.0.0.1/tcp/44453 /ip4/172.31.233.13/tcp/44453 /ip6/::1/tcp/34131]
2025/08/10 18:00:00 No bootstrap peers configured
2025/08/10 18:00:00 DHT initialized in auto mode
2025/08/10 18:00:00 mDNS discovery initialized
2025/08/10 18:00:00 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:00 Rendezvous discovery initialized
2025/08/10 18:00:00 Hybrid discovery strategy initialized
==================
WARNING: DATA RACE
Read at 0x00c00060eee0 by goroutine 127:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0x92
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c00060eee0 by goroutine 128:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xaa
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 127 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33

Goroutine 128 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33
==================
2025/08/10 18:00:01 P2P node initialized with ID: QmexcqmazLBunJawFRiHkk8PjamWSp8488D89XEqASgrPg
fatal error: checkptr: converted pointer straddles multiple allocations

goroutine 9 gp=0xc0005028c0 m=15 mp=0xc000912008 [running]:
runtime.throw({0x211a1cf?, 0xc0fb01?})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/panic.go:1101 +0x48 fp=0xc0009e1708 sp=0xc0009e16d8 pc=0x4b6588
runtime.checkptrAlignment(0xc000912008?, 0x0?, 0x3000000009e1788?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/checkptr.go:26 +0x5b fp=0xc0009e1728 sp=0xc0009e1708 pc=0x44bcdb
github.com/boltdb/bolt.(*Bucket).write(0xc0009e1868)
	/home/kp/go/pkg/mod/github.com/boltdb/bolt@v1.3.1/bucket.go:626 +0x1f2 fp=0xc0009e17b8 sp=0xc0009e1728 pc=0xc13cd2
github.com/boltdb/bolt.(*Bucket).CreateBucket(0xc0004c4398, {0x2fa56d8, 0x4, 0x4})
	/home/kp/go/pkg/mod/github.com/boltdb/bolt@v1.3.1/bucket.go:188 +0x43c fp=0xc0009e19a8 sp=0xc0009e17b8 pc=0xc0fbfc
github.com/boltdb/bolt.(*Bucket).CreateBucketIfNotExists(0xc0004c4398, {0x2fa56d8, 0x4, 0x4})
	/home/kp/go/pkg/mod/github.com/boltdb/bolt@v1.3.1/bucket.go:206 +0x49 fp=0xc0009e19f8 sp=0xc0009e19a8 pc=0xc0fe89
github.com/boltdb/bolt.(*Tx).CreateBucketIfNotExists(...)
	/home/kp/go/pkg/mod/github.com/boltdb/bolt@v1.3.1/tx.go:115
github.com/hashicorp/raft-boltdb.(*BoltStore).initialize(0xc0004c3158)
	/home/kp/go/pkg/mod/github.com/hashicorp/raft-boltdb@v0.0.0-20230125174641-2a8082862702/bolt_store.go:100 +0x107 fp=0xc0009e1a98 sp=0xc0009e19f8 pc=0xc4c4e7
github.com/hashicorp/raft-boltdb.New({{0xc0003971c0, 0x33}, 0x0, 0x0})
	/home/kp/go/pkg/mod/github.com/hashicorp/raft-boltdb@v0.0.0-20230125174641-2a8082862702/bolt_store.go:83 +0x194 fp=0xc0009e1b18 sp=0xc0009e1a98 pc=0xc4c334
github.com/hashicorp/raft-boltdb.NewBoltStore(...)
	/home/kp/go/pkg/mod/github.com/hashicorp/raft-boltdb@v0.0.0-20230125174641-2a8082862702/bolt_store.go:62
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/consensus.(*Engine).initRaft(0xc0003e6000)
	/home/kp/ollamamax/ollama-distributed/pkg/consensus/engine.go:144 +0x778 fp=0xc0009e1d78 sp=0xc0009e1b18 pc=0x1affc38
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/consensus.NewEngine(0xc000118630, 0xc00060c180, 0xc0002b3ce0, 0xc0004c42a0)
	/home/kp/ollamamax/ollama-distributed/pkg/consensus/engine.go:104 +0x453 fp=0xc0009e1e28 sp=0xc0009e1d78 pc=0x1aff2b3
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/consensus.TestEngine_NewEngine.func1(0xc000502700)
	/home/kp/ollamamax/ollama-distributed/pkg/consensus/engine_test.go:71 +0xf3 fp=0xc0009e1ee0 sp=0xc0009e1e28 pc=0x1b172f3
testing.tRunner(0xc000502700, 0xc000624d50)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x226 fp=0xc0009e1fb0 sp=0xc0009e1ee0 pc=0x6d5826
testing.(*T).Run.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x45 fp=0xc0009e1fe0 sp=0xc0009e1fb0 pc=0x6d7585
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0009e1fe8 sp=0xc0009e1fe0 pc=0x4bee41
created by testing.(*T).Run in goroutine 8
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f3

goroutine 1 gp=0xc000002380 m=nil [chan receive]:
runtime.gopark(0x18?, 0x32fdd20?, 0xf0?, 0x0?, 0xc000637718?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000b0d6b0 sp=0xc000b0d690 pc=0x4b66ce
runtime.chanrecv(0xc0005b22a0, 0xc000637796, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc000b0d728 sp=0xc000b0d6b0 pc=0x44b3e5
runtime.chanrecv1(0x32f9b00?, 0x1cb9fa0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:506 +0x12 fp=0xc000b0d750 sp=0xc000b0d728 pc=0x44afd2
testing.(*T).Run(0xc0004ac1c0, {0x20dd5db, 0x14}, 0x21e3b18)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1859 +0x91e fp=0xc000b0d888 sp=0xc000b0d750 pc=0x6d72de
testing.runTests.func1(0xc0004ac1c0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x86 fp=0xc000b0d8d8 sp=0xc000b0d888 pc=0x6db7e6
testing.tRunner(0xc0004ac1c0, 0xc000637ae0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x226 fp=0xc000b0d9a8 sp=0xc000b0d8d8 pc=0x6d5826
testing.runTests(0xc000010048, {0x307d260, 0xd, 0xd}, {0x0?, 0x0?, 0x32fb140?})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96d fp=0xc000b0db10 sp=0xc000b0d9a8 pc=0x6db64d
testing.(*M).Run(0xc00060b2c0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeeb fp=0xc000b0de88 sp=0xc000b0db10 pc=0x6d8c2b
main.main()
	_testmain.go:83 +0x165 fp=0xc000b0df50 sp=0xc000b0de88 pc=0x1b22e85
runtime.main()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:283 +0x28b fp=0xc000b0dfe0 sp=0xc000b0df50 pc=0x47ecab
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000b0dfe8 sp=0xc000b0dfe0 pc=0x4bee41

goroutine 2 gp=0xc000002e00 m=nil [force gc (idle)]:
runtime.gopark(0x2fa7630?, 0x32fdd20?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00009c7a8 sp=0xc00009c788 pc=0x4b66ce
runtime.goparkunlock(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:441
runtime.forcegchelper()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:348 +0xb3 fp=0xc00009c7e0 sp=0xc00009c7a8 pc=0x47eff3
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00009c7e8 sp=0xc00009c7e0 pc=0x4bee41
created by runtime.init.7 in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:336 +0x1a

goroutine 3 gp=0xc000003340 m=nil [GC sweep wait]:
runtime.gopark(0x1?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000b3f80 sp=0xc0000b3f60 pc=0x4b66ce
runtime.goparkunlock(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:441
runtime.bgsweep(0xc00004c180)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgcsweep.go:316 +0xdf fp=0xc0000b3fc8 sp=0xc0000b3f80 pc=0x4669bf
runtime.gcenable.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:204 +0x25 fp=0xc0000b3fe0 sp=0xc0000b3fc8 pc=0x45ae25
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000b3fe8 sp=0xc0000b3fe0 pc=0x4bee41
created by runtime.gcenable in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:204 +0x66

goroutine 4 gp=0xc000003500 m=nil [GC scavenge wait]:
runtime.gopark(0x10000?, 0x249f9f8?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000b2f78 sp=0xc0000b2f58 pc=0x4b66ce
runtime.goparkunlock(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:441
runtime.(*scavengerState).park(0x32fb340)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgcscavenge.go:425 +0x49 fp=0xc0000b2fa8 sp=0xc0000b2f78 pc=0x464409
runtime.bgscavenge(0xc00004c180)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgcscavenge.go:658 +0x59 fp=0xc0000b2fc8 sp=0xc0000b2fa8 pc=0x464999
runtime.gcenable.gowrap2()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:205 +0x25 fp=0xc0000b2fe0 sp=0xc0000b2fc8 pc=0x45adc5
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000b2fe8 sp=0xc0000b2fe0 pc=0x4bee41
created by runtime.gcenable in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:205 +0xa5

goroutine 5 gp=0xc000003dc0 m=nil [finalizer wait]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000ace30 sp=0xc0000ace10 pc=0x4b66ce
runtime.runfinq()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mfinal.go:196 +0x145 fp=0xc0000acfe0 sp=0xc0000ace30 pc=0x459de5
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000acfe8 sp=0xc0000acfe0 pc=0x4bee41
created by runtime.createfing in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mfinal.go:166 +0x3d

goroutine 6 gp=0xc00010a000 m=nil [select]:
runtime.gopark(0xc000184f60?, 0x2?, 0x0?, 0x0?, 0xc000184ed4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000184d30 sp=0xc000184d10 pc=0x4b66ce
runtime.selectgo(0xc000184f60, 0xc000184ed0, 0xc000184f20?, 0x0, 0x2?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000184ea0 sp=0xc000184d30 pc=0x492805
github.com/ipfs/go-log/writer.(*MirrorWriter).logRoutine(0xc0000ee2d0)
	/home/kp/go/pkg/mod/github.com/ipfs/go-log@v1.0.5/writer/writer.go:71 +0x1a5 fp=0xc000184fc0 sp=0xc000184ea0 pc=0x14124e5
github.com/ipfs/go-log/writer.NewMirrorWriter.gowrap1()
	/home/kp/go/pkg/mod/github.com/ipfs/go-log@v1.0.5/writer/writer.go:36 +0x34 fp=0xc000184fe0 sp=0xc000184fc0 pc=0x1412234
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000184fe8 sp=0xc000184fe0 pc=0x4bee41
created by github.com/ipfs/go-log/writer.NewMirrorWriter in goroutine 1
	/home/kp/go/pkg/mod/github.com/ipfs/go-log@v1.0.5/writer/writer.go:36 +0x175

goroutine 18 gp=0xc0004ac380 m=nil [GC worker (idle)]:
runtime.gopark(0xc0000ca060?, 0xc00003e150?, 0xe0?, 0xc1?, 0x453c65?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000183f38 sp=0xc000183f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000183fc8 sp=0xc000183f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000183fe0 sp=0xc000183fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000183fe8 sp=0xc000183fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 19 gp=0xc0004ac540 m=nil [GC worker (idle)]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000182f38 sp=0xc000182f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000182fc8 sp=0xc000182f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000182fe0 sp=0xc000182fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000182fe8 sp=0xc000182fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 20 gp=0xc0004ac700 m=nil [GC worker (idle)]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000181f38 sp=0xc000181f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000181fc8 sp=0xc000181f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000181fe0 sp=0xc000181fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000181fe8 sp=0xc000181fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 21 gp=0xc0004ac8c0 m=nil [GC worker (idle)]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000180f38 sp=0xc000180f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000180fc8 sp=0xc000180f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000180fe0 sp=0xc000180fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000180fe8 sp=0xc000180fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 22 gp=0xc0004aca80 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929ba536?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000129f38 sp=0xc000129f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000129fc8 sp=0xc000129f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000129fe0 sp=0xc000129fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000129fe8 sp=0xc000129fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 23 gp=0xc0004acc40 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bb828?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000128f38 sp=0xc000128f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000128fc8 sp=0xc000128f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000128fe0 sp=0xc000128fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000128fe8 sp=0xc000128fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 24 gp=0xc0004ace00 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929c749b?, 0x3?, 0x1?, 0x8f?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000127f38 sp=0xc000127f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000127fc8 sp=0xc000127f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000127fe0 sp=0xc000127fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000127fe8 sp=0xc000127fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 25 gp=0xc0004acfc0 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929c042e?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000126f38 sp=0xc000126f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000126fc8 sp=0xc000126f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000126fe0 sp=0xc000126fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000126fe8 sp=0xc000126fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 26 gp=0xc0004ad180 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929c29de?, 0xc00003e150?, 0xe0?, 0xc1?, 0x453c65?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000125f38 sp=0xc000125f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000125fc8 sp=0xc000125f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000125fe0 sp=0xc000125fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000125fe8 sp=0xc000125fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 27 gp=0xc0004ad340 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bbe32?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000124f38 sp=0xc000124f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000124fc8 sp=0xc000124f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000124fe0 sp=0xc000124fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000124fe8 sp=0xc000124fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 28 gp=0xc0004ad500 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bd706?, 0x1?, 0x5b?, 0x33?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000123f38 sp=0xc000123f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000123fc8 sp=0xc000123f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000123fe0 sp=0xc000123fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000123fe8 sp=0xc000123fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 29 gp=0xc0004ad6c0 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bd2df?, 0x1?, 0xc1?, 0xc0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000122f38 sp=0xc000122f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000122fc8 sp=0xc000122f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000122fe0 sp=0xc000122fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000122fe8 sp=0xc000122fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 30 gp=0xc0004ad880 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bd55e?, 0x1?, 0x0?, 0x12?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000131f38 sp=0xc000131f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000131fc8 sp=0xc000131f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000131fe0 sp=0xc000131fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000131fe8 sp=0xc000131fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 31 gp=0xc0004ada40 m=nil [GC worker (idle)]:
runtime.gopark(0xd7ba929bd405?, 0x1?, 0x1b?, 0x97?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000130f38 sp=0xc000130f18 pc=0x4b66ce
runtime.gcBgMarkWorker(0xc0004b2380)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1423 +0xe9 fp=0xc000130fc8 sp=0xc000130f38 pc=0x45d289
runtime.gcBgMarkStartWorkers.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x25 fp=0xc000130fe0 sp=0xc000130fc8 pc=0x45d165
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000130fe8 sp=0xc000130fe0 pc=0x4bee41
created by runtime.gcBgMarkStartWorkers in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1339 +0x105

goroutine 34 gp=0xc00031c700 m=nil [select]:
runtime.gopark(0xc000185f80?, 0x3?, 0x45?, 0x8c?, 0xc000185f1a?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000185d70 sp=0xc000185d50 pc=0x4b66ce
runtime.selectgo(0xc000185f80, 0xc000185f14, 0xc000263580?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000185ee0 sp=0xc000185d70 pc=0x492805
go.opencensus.io/stats/view.(*worker).start(0xc000263580)
	/home/kp/go/pkg/mod/go.opencensus.io@v0.24.0/stats/view/worker.go:292 +0x197 fp=0xc000185fc0 sp=0xc000185ee0 pc=0x1496837
go.opencensus.io/stats/view.init.0.gowrap1()
	/home/kp/go/pkg/mod/go.opencensus.io@v0.24.0/stats/view/worker.go:34 +0x34 fp=0xc000185fe0 sp=0xc000185fc0 pc=0x1495314
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000185fe8 sp=0xc000185fe0 pc=0x4bee41
created by go.opencensus.io/stats/view.init.0 in goroutine 1
	/home/kp/go/pkg/mod/go.opencensus.io@v0.24.0/stats/view/worker.go:34 +0xf7

goroutine 35 gp=0xc00031c8c0 m=nil [chan receive]:
runtime.gopark(0x331f478?, 0xffffffff?, 0xa9?, 0x21?, 0xc000186f50?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000186f18 sp=0xc000186ef8 pc=0x4b66ce
runtime.chanrecv(0xc00026b1f0, 0x0, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc000186f90 sp=0xc000186f18 pc=0x44b3e5
runtime.chanrecv1(0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:506 +0x12 fp=0xc000186fb8 sp=0xc000186f90 pc=0x44afd2
runtime.unique_runtime_registerUniqueMapCleanup.func2(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1797
runtime.unique_runtime_registerUniqueMapCleanup.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1800 +0x2f fp=0xc000186fe0 sp=0xc000186fb8 pc=0x45df6f
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000186fe8 sp=0xc000186fe0 pc=0x4bee41
created by unique.runtime_registerUniqueMapCleanup in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/mgc.go:1795 +0x79

goroutine 73 gp=0xc00031dc00 m=nil [select]:
runtime.gopark(0xc00012ef70?, 0x2?, 0xa0?, 0xed?, 0xc00012ef04?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012ed60 sp=0xc00012ed40 pc=0x4b66ce
runtime.selectgo(0xc00012ef70, 0xc00012ef00, 0xc000601140?, 0x0, 0xc00009ef30?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012eed0 sp=0xc00012ed60 pc=0x492805
github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).background(0xc00039c150, {0x24c48e0, 0xc000558460})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:127 +0x185 fp=0xc00012efa0 sp=0xc00012eed0 pc=0x19f37e5
github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).init.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:120 +0x50 fp=0xc00012efe0 sp=0xc00012efa0 pc=0x19f3630
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012efe8 sp=0xc00012efe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).init in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:120 +0x12d

goroutine 8 gp=0xc0004addc0 m=nil [chan receive]:
runtime.gopark(0x18?, 0x32fdd20?, 0x38?, 0x1?, 0xc0000adca0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000adc38 sp=0xc0000adc18 pc=0x4b66ce
runtime.chanrecv(0xc0005b2380, 0xc0000add1e, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc0000adcb0 sp=0xc0000adc38 pc=0x44b3e5
runtime.chanrecv1(0x32f9b00?, 0x1cb9fa0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:506 +0x12 fp=0xc0000adcd8 sp=0xc0000adcb0 pc=0x44afd2
testing.(*T).Run(0xc0004adc00, {0x1f93e2b, 0xc}, 0xc000624d50)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1859 +0x91e fp=0xc0000ade10 sp=0xc0000adcd8 pc=0x6d72de
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/consensus.TestEngine_NewEngine(0xc0004adc00)
	/home/kp/ollamamax/ollama-distributed/pkg/consensus/engine_test.go:65 +0x505 fp=0xc0000adee0 sp=0xc0000ade10 pc=0x1b170c5
testing.tRunner(0xc0004adc00, 0x21e3b18)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x226 fp=0xc0000adfb0 sp=0xc0000adee0 pc=0x6d5826
testing.(*T).Run.gowrap1()
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x45 fp=0xc0000adfe0 sp=0xc0000adfb0 pc=0x6d7585
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000adfe8 sp=0xc0000adfe0 pc=0x4bee41
created by testing.(*T).Run in goroutine 1
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f3

goroutine 10 gp=0xc000502a80 m=nil [select]:
runtime.gopark(0xc00063ef80?, 0x2?, 0x78?, 0xed?, 0xc00063eedc?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00063ed38 sp=0xc00063ed18 pc=0x4b66ce
runtime.selectgo(0xc00063ef80, 0xc00063eed8, 0x0?, 0x0, 0x6d7585?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00063eea8 sp=0xc00063ed38 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker(0xc000626820)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:646 +0x271 fp=0xc00063efc0 sp=0xc00063eea8 pc=0x1a80931
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x34 fp=0xc00063efe0 sp=0xc00063efc0 pc=0x1a7b354
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00063efe8 sp=0xc00063efe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x64e

goroutine 11 gp=0xc000502c40 m=nil [select]:
runtime.gopark(0xc00012cf80?, 0x2?, 0x80?, 0xcd?, 0xc00012cee4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012cd40 sp=0xc00012cd20 pc=0x4b66ce
runtime.selectgo(0xc00012cf80, 0xc00012cee0, 0x20?, 0x0, 0x1?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012ceb0 sp=0xc00012cd40 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).connectionPoolManager(0xc000626820)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:720 +0x21f fp=0xc00012cfc0 sp=0xc00012ceb0 pc=0x1a81cdf
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap2()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:229 +0x34 fp=0xc00012cfe0 sp=0xc00012cfc0 pc=0x1a7b2f4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012cfe8 sp=0xc00012cfe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:229 +0x6b5

goroutine 12 gp=0xc000502e00 m=nil [select]:
runtime.gopark(0xc000143f58?, 0x5?, 0xe?, 0x0?, 0xc0001432d6?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0001430f0 sp=0xc0001430d0 pc=0x4b66ce
runtime.selectgo(0xc000143f58, 0xc0001432cc, 0x2?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000143260 sp=0xc0001430f0 pc=0x492805
github.com/libp2p/go-libp2p/p2p/net/connmgr.(*decayer).process(0xc00060f1f0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/decay.go:164 +0x47b fp=0xc000143fc0 sp=0xc000143260 pc=0x16e8c3b
github.com/libp2p/go-libp2p/p2p/net/connmgr.NewDecayer.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/decay.go:96 +0x34 fp=0xc000143fe0 sp=0xc000143fc0 pc=0x16e7c14
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000143fe8 sp=0xc000143fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/connmgr.NewDecayer in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/decay.go:96 +0x4f7

goroutine 13 gp=0xc000502fc0 m=nil [select]:
runtime.gopark(0xc00012df70?, 0x2?, 0x58?, 0xdd?, 0xc00012dec0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012dd18 sp=0xc00012dcf8 pc=0x4b66ce
runtime.selectgo(0xc00012df70, 0xc00012debc, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012de88 sp=0xc00012dd18 pc=0x492805
github.com/libp2p/go-libp2p/p2p/net/connmgr.(*BasicConnMgr).background(0xc000235b08)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/connmgr.go:359 +0x312 fp=0xc00012dfc0 sp=0xc00012de88 pc=0x16e1692
github.com/libp2p/go-libp2p/p2p/net/connmgr.NewConnManager.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/connmgr.go:153 +0x34 fp=0xc00012dfe0 sp=0xc00012dfc0 pc=0x16df574
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012dfe8 sp=0xc00012dfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/connmgr.NewConnManager in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/connmgr/connmgr.go:153 +0x7b5

goroutine 14 gp=0xc000503180 m=nil [select]:
runtime.gopark(0xc00063ff60?, 0x2?, 0x60?, 0xfd?, 0xc00063fec4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00063fd20 sp=0xc00063fd00 pc=0x4b66ce
runtime.selectgo(0xc00063ff60, 0xc00063fec0, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00063fe90 sp=0xc00063fd20 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.(*memoryAddrBook).background(0xc000236408, {0x24c48e0, 0xc0001cc870})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:116 +0x21a fp=0xc00063ffa0 sp=0xc00063fe90 pc=0x15e66da
github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.NewAddrBook.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:96 +0x50 fp=0xc00063ffe0 sp=0xc00063ffa0 pc=0x15e6490
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00063ffe8 sp=0xc00063ffe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.NewAddrBook in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:96 +0x49a

goroutine 15 gp=0xc000503340 m=nil [select]:
runtime.gopark(0xc00012af80?, 0x2?, 0x80?, 0xad?, 0xc00012aee4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012ad40 sp=0xc00012ad20 pc=0x4b66ce
runtime.selectgo(0xc00012af80, 0xc00012aee0, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012aeb0 sp=0xc00012ad40 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/resource-manager.(*resourceManager).background(0xc00060c240)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/resource-manager/rcmgr.go:371 +0x21a fp=0xc00012afc0 sp=0xc00012aeb0 pc=0x160b8fa
github.com/libp2p/go-libp2p/p2p/host/resource-manager.NewResourceManager.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/resource-manager/rcmgr.go:184 +0x34 fp=0xc00012afe0 sp=0xc00012afc0 pc=0x16098d4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012afe8 sp=0xc00012afe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/resource-manager.NewResourceManager in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/resource-manager/rcmgr.go:184 +0x1093

goroutine 58 gp=0xc000503500 m=nil [select]:
runtime.gopark(0xc00012fe98?, 0x2?, 0xc0?, 0xfb?, 0xc00012fd4c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012fb80 sp=0xc00012fb60 pc=0x4b66ce
runtime.selectgo(0xc00012fe98, 0xc00012fd48, 0x0?, 0x0, 0xff?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012fcf0 sp=0xc00012fb80 pc=0x492805
github.com/libp2p/go-libp2p/p2p/protocol/holepunch.(*Service).watchForPublicAddr(0xc0002c8400)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/holepunch/svc.go:115 +0x3d7 fp=0xc00012ffc0 sp=0xc00012fcf0 pc=0x19a0d57
github.com/libp2p/go-libp2p/p2p/protocol/holepunch.NewService.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/holepunch/svc.go:90 +0x34 fp=0xc00012ffe0 sp=0xc00012ffc0 pc=0x19a0954
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012ffe8 sp=0xc00012ffe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/protocol/holepunch.NewService in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/holepunch/svc.go:90 +0x3ac

goroutine 75 gp=0xc00031c1c0 m=nil [IO wait]:
runtime.gopark(0x0?, 0x7?, 0x0?, 0xa0?, 0x400?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000a97b30 sp=0xc000a97b10 pc=0x4b66ce
runtime.netpollblock(0x4c2171?, 0x58c813?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:575 +0xf7 fp=0xc000a97b68 sp=0xc000a97b30 pc=0x477637
internal/poll.runtime_pollWait(0x7fca1dac7b68, 0x72)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:351 +0x85 fp=0xc000a97b88 sp=0xc000a97b68 pc=0x4b58c5
internal/poll.(*pollDesc).wait(0xc000936120, 0x72, 0x0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:84 +0xb1 fp=0xc000a97bc8 sp=0xc000a97b88 pc=0x58ac31
internal/poll.(*pollDesc).waitRead(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:89
internal/poll.(*FD).Read(0xc000936100, {0xc000c2a000, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_unix.go:165 +0x453 fp=0xc000a97cb8 sp=0xc000a97bc8 pc=0x58c813
net.(*netFD).Read(0xc000936100, {0xc000c2a000, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/fd_posix.go:55 +0x4b fp=0xc000a97d08 sp=0xc000a97cb8 pc=0x85b0cb
net.(*conn).Read(0xc000942008, {0xc000c2a000, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/net.go:194 +0xad fp=0xc000a97d88 sp=0xc000a97d08 pc=0x87aa0d
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer(0xc000626820, {0x0?, 0x0?}, 0xc000601020)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:385 +0x786 fp=0xc000a97f48 sp=0xc000a97d88 pc=0x1a7d946
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1(0xc000601020)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5e fp=0xc000a97fb8 sp=0xc000a97f48 pc=0x1a7d15e
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x42 fp=0xc000a97fe0 sp=0xc000a97fb8 pc=0x1a7d0c2
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000a97fe8 sp=0xc000a97fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery in goroutine 152
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49d

goroutine 89 gp=0xc00010a1c0 m=nil [select]:
runtime.gopark(0xc0000aff10?, 0x5?, 0xc8?, 0xfc?, 0xc0000afe36?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000afc88 sp=0xc0000afc68 pc=0x4b66ce
runtime.selectgo(0xc0000aff10, 0xc0000afe2c, 0x4c2171?, 0x0, 0x41f680?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0000afdf8 sp=0xc0000afc88 pc=0x492805
github.com/libp2p/go-libp2p/p2p/protocol/identify.(*ObservedAddrManager).worker(0xc0004c9860)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/obsaddr.go:258 +0x390 fp=0xc0000affc0 sp=0xc0000afdf8 pc=0x1994330
github.com/libp2p/go-libp2p/p2p/protocol/identify.NewObservedAddrManager.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/obsaddr.go:159 +0x34 fp=0xc0000affe0 sp=0xc0000affc0 pc=0x1992cd4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000affe8 sp=0xc0000affe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/protocol/identify.NewObservedAddrManager in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/obsaddr.go:159 +0x7f5

goroutine 138 gp=0xc00010a380 m=nil [select]:
runtime.gopark(0xc0000b1f60?, 0x2?, 0x60?, 0x1d?, 0xc0000b1ec4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000b1d20 sp=0xc0000b1d00 pc=0x4b66ce
runtime.selectgo(0xc0000b1f60, 0xc0000b1ec0, 0x0?, 0x0, 0x452f6d?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0000b1e90 sp=0xc0000b1d20 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.(*memoryAddrBook).background(0xc0009ae008, {0x24c48e0, 0xc0009922d0})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:116 +0x21a fp=0xc0000b1fa0 sp=0xc0000b1e90 pc=0x15e66da
github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.NewAddrBook.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:96 +0x50 fp=0xc0000b1fe0 sp=0xc0000b1fa0 pc=0x15e6490
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000b1fe8 sp=0xc0000b1fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/peerstore/pstoremem.NewAddrBook in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/peerstore/pstoremem/addr_book.go:96 +0x49a

goroutine 59 gp=0xc0005036c0 m=nil [select]:
runtime.gopark(0xc00063aea8?, 0x2?, 0x78?, 0x53?, 0xc00063ad8c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00063abe8 sp=0xc00063abc8 pc=0x4b66ce
runtime.selectgo(0xc00063aea8, 0xc00063ad88, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00063ad58 sp=0xc00063abe8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.(*reuse).gc(0xc00090e5a0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:164 +0x20f fp=0xc00063afc0 sp=0xc00063ad58 pc=0x18e456f
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x34 fp=0xc00063afe0 sp=0xc00063afc0 pc=0x18e4334
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00063afe8 sp=0xc00063afe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x2e5

goroutine 60 gp=0xc000503880 m=nil [select]:
runtime.gopark(0xc0000aeea8?, 0x2?, 0x78?, 0xe8?, 0xc0000aed8c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0000aebe8 sp=0xc0000aebc8 pc=0x4b66ce
runtime.selectgo(0xc0000aeea8, 0xc0000aed88, 0x0?, 0x0, 0x7fca1da0c1c8?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0000aed58 sp=0xc0000aebe8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.(*reuse).gc(0xc00090e5f0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:164 +0x20f fp=0xc0000aefc0 sp=0xc0000aed58 pc=0x18e456f
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x34 fp=0xc0000aefe0 sp=0xc0000aefc0 pc=0x18e4334
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0000aefe8 sp=0xc0000aefe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x2e5

goroutine 61 gp=0xc000503a40 m=nil [select]:
runtime.gopark(0xc00012bd50?, 0x2?, 0x40?, 0xbb?, 0xc00012bcc4?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00012bb00 sp=0xc00012bae0 pc=0x4b66ce
runtime.selectgo(0xc00012bd50, 0xc00012bcc0, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00012bc70 sp=0xc00012bb00 pc=0x492805
github.com/libp2p/go-libp2p/p2p/protocol/circuitv2/client.(*Listener).Accept(0xc000893860)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/circuitv2/client/listen.go:21 +0x1e9 fp=0xc00012bd90 sp=0xc00012bc70 pc=0x19bf469
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).handleIncoming(0xc00003e8c0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:75 +0x18b fp=0xc00012bfc0 sp=0xc00012bd90 pc=0x1711ceb
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x34 fp=0xc00012bfe0 sp=0xc00012bfc0 pc=0x1714614
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00012bfe8 sp=0xc00012bfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x445

goroutine 62 gp=0xc000503c00 m=nil [chan receive]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000986c50 sp=0xc000986c30 pc=0x4b66ce
runtime.chanrecv(0xc0005b3960, 0xc000986d40, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc000986cc8 sp=0xc000986c50 pc=0x44b3e5
runtime.chanrecv2(0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:511 +0x12 fp=0xc000986cf0 sp=0xc000986cc8 pc=0x44aff2
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).Accept(0xc00003e8c0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:163 +0x5a fp=0xc000986d60 sp=0xc000986cf0 pc=0x17131da
github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr.func2()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:129 +0x178 fp=0xc000986fe0 sp=0xc000986d60 pc=0x19fadd8
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000986fe8 sp=0xc000986fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:107 +0x36a

goroutine 63 gp=0xc000503dc0 m=nil [IO wait]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0xc0002c9a80?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0009878a0 sp=0xc000987880 pc=0x4b66ce
runtime.netpollblock(0x4c2171?, 0x592bc5?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:575 +0xf7 fp=0xc0009878d8 sp=0xc0009878a0 pc=0x477637
internal/poll.runtime_pollWait(0x7fca1dac7eb0, 0x72)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:351 +0x85 fp=0xc0009878f8 sp=0xc0009878d8 pc=0x4b58c5
internal/poll.(*pollDesc).wait(0xc0002c9aa0, 0x72, 0x0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:84 +0xb1 fp=0xc000987938 sp=0xc0009878f8 pc=0x58ac31
internal/poll.(*pollDesc).waitRead(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:89
internal/poll.(*FD).Accept(0xc0002c9a80)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_unix.go:620 +0x505 fp=0xc000987a40 sp=0xc000987938 pc=0x592bc5
net.(*netFD).accept(0xc0002c9a80)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/fd_unix.go:172 +0x45 fp=0xc000987b50 sp=0xc000987a40 pc=0x85e645
net.(*TCPListener).accept(0xc0008bfb80)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/tcpsock_posix.go:159 +0x4e fp=0xc000987bf0 sp=0xc000987b50 pc=0x88bd4e
net.(*TCPListener).Accept(0xc0008bfb80)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/tcpsock.go:380 +0x65 fp=0xc000987c60 sp=0xc000987bf0 pc=0x88a105
github.com/multiformats/go-multiaddr/net.(*maListener).Accept(0xc000891d60)
	/home/kp/go/pkg/mod/github.com/multiformats/go-multiaddr@v0.12.0/net/net.go:243 +0x53 fp=0xc000987d58 sp=0xc000987c60 pc=0x143b4d3
github.com/libp2p/go-libp2p/p2p/net/reuseport.(*listener).Accept(0xc00090bd70)
	<autogenerated>:1 +0x44 fp=0xc000987d90 sp=0xc000987d58 pc=0x1904184
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).handleIncoming(0xc00003eaf0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:75 +0x18b fp=0xc000987fc0 sp=0xc000987d90 pc=0x1711ceb
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x34 fp=0xc000987fe0 sp=0xc000987fc0 pc=0x1714614
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000987fe8 sp=0xc000987fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x445

goroutine 64 gp=0xc000002000 m=nil [chan receive]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000982c50 sp=0xc000982c30 pc=0x4b66ce
runtime.chanrecv(0xc0005b39d0, 0xc000982d40, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc000982cc8 sp=0xc000982c50 pc=0x44b3e5
runtime.chanrecv2(0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:511 +0x12 fp=0xc000982cf0 sp=0xc000982cc8 pc=0x44aff2
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).Accept(0xc00003eaf0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:163 +0x5a fp=0xc000982d60 sp=0xc000982cf0 pc=0x17131da
github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr.func2()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:129 +0x178 fp=0xc000982fe0 sp=0xc000982d60 pc=0x19fadd8
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000982fe8 sp=0xc000982fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:107 +0x36a

goroutine 65 gp=0xc000956000 m=nil [IO wait]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0xc0002c9b00?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0006388a0 sp=0xc000638880 pc=0x4b66ce
runtime.netpollblock(0x4c2171?, 0x592bc5?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:575 +0xf7 fp=0xc0006388d8 sp=0xc0006388a0 pc=0x477637
internal/poll.runtime_pollWait(0x7fca1dac7d98, 0x72)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:351 +0x85 fp=0xc0006388f8 sp=0xc0006388d8 pc=0x4b58c5
internal/poll.(*pollDesc).wait(0xc0002c9b20, 0x72, 0x0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:84 +0xb1 fp=0xc000638938 sp=0xc0006388f8 pc=0x58ac31
internal/poll.(*pollDesc).waitRead(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:89
internal/poll.(*FD).Accept(0xc0002c9b00)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_unix.go:620 +0x505 fp=0xc000638a40 sp=0xc000638938 pc=0x592bc5
net.(*netFD).accept(0xc0002c9b00)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/fd_unix.go:172 +0x45 fp=0xc000638b50 sp=0xc000638a40 pc=0x85e645
net.(*TCPListener).accept(0xc0008bfc00)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/tcpsock_posix.go:159 +0x4e fp=0xc000638bf0 sp=0xc000638b50 pc=0x88bd4e
net.(*TCPListener).Accept(0xc0008bfc00)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/tcpsock.go:380 +0x65 fp=0xc000638c60 sp=0xc000638bf0 pc=0x88a105
github.com/multiformats/go-multiaddr/net.(*maListener).Accept(0xc000891d80)
	/home/kp/go/pkg/mod/github.com/multiformats/go-multiaddr@v0.12.0/net/net.go:243 +0x53 fp=0xc000638d58 sp=0xc000638c60 pc=0x143b4d3
github.com/libp2p/go-libp2p/p2p/net/reuseport.(*listener).Accept(0xc00090bdb8)
	<autogenerated>:1 +0x44 fp=0xc000638d90 sp=0xc000638d58 pc=0x1904184
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).handleIncoming(0xc00003ecb0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:75 +0x18b fp=0xc000638fc0 sp=0xc000638d90 pc=0x1711ceb
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x34 fp=0xc000638fe0 sp=0xc000638fc0 pc=0x1714614
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000638fe8 sp=0xc000638fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/upgrader.(*upgrader).UpgradeListener in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/upgrader.go:119 +0x445

goroutine 98 gp=0xc0009561c0 m=nil [chan receive]:
runtime.gopark(0x0?, 0x0?, 0x0?, 0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000639c50 sp=0xc000639c30 pc=0x4b66ce
runtime.chanrecv(0xc0005b3a40, 0xc000639d40, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:664 +0x3e5 fp=0xc000639cc8 sp=0xc000639c50 pc=0x44b3e5
runtime.chanrecv2(0x0?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/chan.go:511 +0x12 fp=0xc000639cf0 sp=0xc000639cc8 pc=0x44aff2
github.com/libp2p/go-libp2p/p2p/net/upgrader.(*listener).Accept(0xc00003ecb0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/upgrader/listener.go:163 +0x5a fp=0xc000639d60 sp=0xc000639cf0 pc=0x17131da
github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr.func2()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:129 +0x178 fp=0xc000639fe0 sp=0xc000639d60 pc=0x19fadd8
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000639fe8 sp=0xc000639fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/swarm.(*Swarm).AddListenAddr in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_listen.go:107 +0x36a

goroutine 105 gp=0xc000956380 m=nil [select]:
runtime.gopark(0xc000981ea8?, 0x2?, 0x78?, 0xe8?, 0xc000981d8c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000981be8 sp=0xc000981bc8 pc=0x4b66ce
runtime.selectgo(0xc000981ea8, 0xc000981d88, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000981d58 sp=0xc000981be8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.(*reuse).gc(0xc000558500)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:164 +0x20f fp=0xc000981fc0 sp=0xc000981d58 pc=0x18e456f
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x34 fp=0xc000981fe0 sp=0xc000981fc0 pc=0x18e4334
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000981fe8 sp=0xc000981fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x2e5

goroutine 139 gp=0xc0009d8000 m=nil [select]:
runtime.gopark(0xc000187f70?, 0x2?, 0xa0?, 0x7d?, 0xc000187f04?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000187d60 sp=0xc000187d40 pc=0x4b66ce
runtime.selectgo(0xc000187f70, 0xc000187f00, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000187ed0 sp=0xc000187d60 pc=0x492805
github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).background(0xc0009d2390, {0x24c48e0, 0xc000992460})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:127 +0x185 fp=0xc000187fa0 sp=0xc000187ed0 pc=0x19f37e5
github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).init.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:120 +0x50 fp=0xc000187fe0 sp=0xc000187fa0 pc=0x19f3630
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000187fe8 sp=0xc000187fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/net/swarm.(*DialBackoff).init in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/net/swarm/swarm_dial.go:120 +0x12d

goroutine 106 gp=0xc000956540 m=nil [select]:
runtime.gopark(0xc000984ea8?, 0x2?, 0x78?, 0xe8?, 0xc000984d8c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000984be8 sp=0xc000984bc8 pc=0x4b66ce
runtime.selectgo(0xc000984ea8, 0xc000984d88, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000984d58 sp=0xc000984be8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.(*reuse).gc(0xc000558550)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:164 +0x20f fp=0xc000984fc0 sp=0xc000984d58 pc=0x18e456f
github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x34 fp=0xc000984fe0 sp=0xc000984fc0 pc=0x18e4334
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000984fe8 sp=0xc000984fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/transport/quicreuse.newReuse in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/transport/quicreuse/reuse.go:139 +0x2e5

goroutine 107 gp=0xc000956700 m=nil [select]:
runtime.gopark(0xc00063cf50?, 0x2?, 0x28?, 0xcd?, 0xc00063ce8c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc00063cce8 sp=0xc00063ccc8 pc=0x4b66ce
runtime.selectgo(0xc00063cf50, 0xc00063ce88, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc00063ce58 sp=0xc00063cce8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/autonat.(*autoNATService).background(0xc000998a40, {0x24c48e0, 0xc0005587d0})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/svc.go:283 +0x358 fp=0xc00063cfa0 sp=0xc00063ce58 pc=0x196ae18
github.com/libp2p/go-libp2p/p2p/host/autonat.(*autoNATService).Enable.gowrap2()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/svc.go:261 +0x50 fp=0xc00063cfe0 sp=0xc00063cfa0 pc=0x196a830
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc00063cfe8 sp=0xc00063cfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/autonat.(*autoNATService).Enable in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/svc.go:261 +0x2fe

goroutine 110 gp=0xc000956c40 m=nil [select]:
runtime.gopark(0xc000980e60?, 0x5?, 0x60?, 0xb?, 0xc000980cee?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000980b20 sp=0xc000980b00 pc=0x4b66ce
runtime.selectgo(0xc000980e60, 0xc000980ce4, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000980c90 sp=0xc000980b20 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/autonat.(*AmbientAutoNAT).background(0xc00087c8f0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/autonat.go:173 +0x585 fp=0xc000980fc0 sp=0xc000980c90 pc=0x1961b65
github.com/libp2p/go-libp2p/p2p/host/autonat.New.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/autonat.go:129 +0x34 fp=0xc000980fe0 sp=0xc000980fc0 pc=0x1961194
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000980fe8 sp=0xc000980fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/autonat.New in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autonat/autonat.go:129 +0xe4b

goroutine 112 gp=0xc000956fc0 m=nil [select]:
runtime.gopark(0xc0007abcb8?, 0x3?, 0x28?, 0xba?, 0xc0007abb92?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007ab9e8 sp=0xc0007ab9c8 pc=0x4b66ce
runtime.selectgo(0xc0007abcb8, 0xc0007abb8c, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007abb58 sp=0xc0007ab9e8 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/pstoremanager.(*PeerstoreManager).background(0xc000247b80, {0x24c48e0, 0xc000558910}, {0x24c29d0, 0xc000558960})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/pstoremanager/pstoremanager.go:96 +0x476 fp=0xc0007abf80 sp=0xc0007abb58 pc=0x196c636
github.com/libp2p/go-libp2p/p2p/host/pstoremanager.(*PeerstoreManager).Start.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/pstoremanager/pstoremanager.go:78 +0x6c fp=0xc0007abfe0 sp=0xc0007abf80 pc=0x196c0ac
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007abfe8 sp=0xc0007abfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/pstoremanager.(*PeerstoreManager).Start in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/pstoremanager/pstoremanager.go:78 +0x3f7

goroutine 113 gp=0xc000957180 m=nil [select]:
runtime.gopark(0xc0007c1ed0?, 0x2?, 0x80?, 0x1c?, 0xc0007c1e04?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007c1c40 sp=0xc0007c1c20 pc=0x4b66ce
runtime.selectgo(0xc0007c1ed0, 0xc0007c1e00, 0xc0008d87e0?, 0x0, 0x2?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007c1db0 sp=0xc0007c1c40 pc=0x492805
github.com/libp2p/go-libp2p/p2p/protocol/identify.(*idService).loop(0xc00039a480, {0x24c48e0, 0xc00014ceb0})
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/id.go:268 +0x779 fp=0xc0007c1fa0 sp=0xc0007c1db0 pc=0x1986d99
github.com/libp2p/go-libp2p/p2p/protocol/identify.(*idService).Start.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/id.go:231 +0x50 fp=0xc0007c1fe0 sp=0xc0007c1fa0 pc=0x19865f0
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007c1fe8 sp=0xc0007c1fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/protocol/identify.(*idService).Start in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/id.go:231 +0x287

goroutine 146 gp=0xc000957340 m=nil [select]:
runtime.gopark(0xc000067ef8?, 0x3?, 0x80?, 0x7c?, 0xc000067e0a?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000a55c40 sp=0xc000a55c20 pc=0x4b66ce
runtime.selectgo(0xc000a55ef8, 0xc000067e04, 0xc000999e80?, 0x0, 0x3?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000a55db0 sp=0xc000a55c40 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).background(0xc000120180)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:551 +0x705 fp=0xc000a55fc0 sp=0xc000a55db0 pc=0x19b12a5
github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).Start.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:392 +0x34 fp=0xc000a55fe0 sp=0xc000a55fc0 pc=0x19af534
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000a55fe8 sp=0xc000a55fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/basic.(*BasicHost).Start in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:392 +0xe5

goroutine 147 gp=0xc000957500 m=nil [select]:
runtime.gopark(0xc0007baed8?, 0x2?, 0xa8?, 0xac?, 0xc0007bae2c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007bac68 sp=0xc0007bac48 pc=0x4b66ce
runtime.selectgo(0xc0007baed8, 0xc0007bae28, 0xc0003d6098?, 0x0, 0x1?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007badd8 sp=0xc0007bac68 pc=0x492805
github.com/libp2p/go-libp2p/p2p/host/autorelay.(*AutoRelay).background(0xc00025c310)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autorelay/autorelay.go:76 +0x3dc fp=0xc0007baf80 sp=0xc0007badd8 pc=0x19c77dc
github.com/libp2p/go-libp2p/p2p/host/autorelay.(*AutoRelay).Start.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autorelay/autorelay.go:63 +0x7e fp=0xc0007bafe0 sp=0xc0007baf80 pc=0x19c735e
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007bafe8 sp=0xc0007bafe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/host/autorelay.(*AutoRelay).Start in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/autorelay/autorelay.go:61 +0xa5

goroutine 148 gp=0xc0009576c0 m=nil [select]:
runtime.gopark(0xc0007f2f80?, 0x2?, 0x78?, 0x2d?, 0xc0007f2edc?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007f2d38 sp=0xc0007f2d18 pc=0x4b66ce
runtime.selectgo(0xc0007f2f80, 0xc0007f2ed8, 0x4518e5?, 0x0, 0xc000099740?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007f2ea8 sp=0xc0007f2d38 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*ConnectionPool).cleanupLoop(0xc00025d960)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:326 +0x24c fp=0xc0007f2fc0 sp=0xc0007f2ea8 pc=0x1a89b8c
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewConnectionPool.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:110 +0x34 fp=0xc0007f2fe0 sp=0xc0007f2fc0 pc=0x1a877b4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007f2fe8 sp=0xc0007f2fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewConnectionPool in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:110 +0x40c

goroutine 149 gp=0xc000957880 m=nil [select]:
runtime.gopark(0xc0007a7f80?, 0x2?, 0x78?, 0x7d?, 0xc0007a7edc?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007a7d38 sp=0xc0007a7d18 pc=0x4b66ce
runtime.selectgo(0xc0007a7f80, 0xc0007a7ed8, 0x4518e5?, 0x0, 0xc0003efa30?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007a7ea8 sp=0xc0007a7d38 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*ConnectionPool).qualityCheckLoop(0xc00025d960)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:363 +0x24c fp=0xc0007a7fc0 sp=0xc0007a7ea8 pc=0x1a8a3ec
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewConnectionPool.gowrap2()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:111 +0x34 fp=0xc0007a7fe0 sp=0xc0007a7fc0 pc=0x1a87754
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007a7fe8 sp=0xc0007a7fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewConnectionPool in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/connection_pool.go:111 +0x475

goroutine 150 gp=0xc000957a40 m=nil [select]:
runtime.gopark(0xc0007a8f80?, 0x2?, 0x78?, 0x8d?, 0xc0007a8edc?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007a8d38 sp=0xc0007a8d18 pc=0x4b66ce
runtime.selectgo(0xc0007a8f80, 0xc0007a8ed8, 0x4e6df1?, 0x0, 0x1495314?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007a8ea8 sp=0xc0007a8d38 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*BandwidthManager).updateLoop(0xc000646750)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/bandwidth_manager.go:331 +0x24c fp=0xc0007a8fc0 sp=0xc0007a8ea8 pc=0x1a86aac
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewBandwidthManager.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/bandwidth_manager.go:121 +0x34 fp=0xc0007a8fe0 sp=0xc0007a8fc0 pc=0x1a842b4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007a8fe8 sp=0xc0007a8fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewBandwidthManager in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/bandwidth_manager.go:121 +0xb54

goroutine 151 gp=0xc000957c00 m=nil [select]:
runtime.gopark(0xc0007a6f70?, 0x2?, 0xc0?, 0x6d?, 0xc0007a6f24?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007a6d80 sp=0xc0007a6d60 pc=0x4b66ce
runtime.selectgo(0xc0007a6f70, 0xc0007a6f20, 0x0?, 0x0, 0xc00060f480?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007a6ef0 sp=0xc0007a6d80 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).collectMetrics(0xc000438600)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:339 +0x185 fp=0xc0007a6fc0 sp=0xc0007a6ef0 pc=0x1a91a25
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:293 +0x34 fp=0xc0007a6fe0 sp=0xc0007a6fc0 pc=0x1a8dd34
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007a6fe8 sp=0xc0007a6fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:293 +0x21d7

goroutine 152 gp=0xc000957dc0 m=nil [select]:
runtime.gopark(0xc0007a9d20?, 0x2?, 0xc0?, 0x9a?, 0xc0007a9c24?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007a9a80 sp=0xc0007a9a60 pc=0x4b66ce
runtime.selectgo(0xc0007a9d20, 0xc0007a9c20, 0x37e11d600?, 0x0, 0x4637c5?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007a9bf0 sp=0xc0007a9a80 pc=0x492805
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery(0xc000626820, {0x24c4950, 0xc00060e850})
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:342 +0x590 fp=0xc0007a9d80 sp=0xc0007a9bf0 pc=0x1a7cd70
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType(0xc000626820, {0x24c4950, 0xc00060e850})
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x157 fp=0xc0007a9ec0 sp=0xc0007a9d80 pc=0x1a7c097
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery(0xc000438600)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbc fp=0xc0007a9fc0 sp=0xc0007a9ec0 pc=0x1a92ffc
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x34 fp=0xc0007a9fe0 sp=0xc0007a9fc0 pc=0x1a8dcd4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007a9fe8 sp=0xc0007a9fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost in goroutine 9
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x2251

goroutine 153 gp=0xc00031ca80 m=nil [select]:
runtime.gopark(0xc000983ce8?, 0x5?, 0x78?, 0x39?, 0xc000983b26?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000983938 sp=0xc000983918 pc=0x4b66ce
runtime.selectgo(0xc000983ce8, 0xc000983b1c, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc000983aa8 sp=0xc000983938 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht/providers.(*ProviderManager).run.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/providers/providers_manager.go:160 +0x410 fp=0xc000983fe0 sp=0xc000983aa8 pc=0x14299b0
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000983fe8 sp=0xc000983fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht/providers.(*ProviderManager).run in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/providers/providers_manager.go:139 +0xa5

goroutine 76 gp=0xc0009d8380 m=nil [IO wait]:
runtime.gopark(0x0?, 0x8?, 0x0?, 0xc8?, 0x400?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007c5b30 sp=0xc0007c5b10 pc=0x4b66ce
runtime.netpollblock(0x4c2171?, 0x58c813?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:575 +0xf7 fp=0xc0007c5b68 sp=0xc0007c5b30 pc=0x477637
internal/poll.runtime_pollWait(0x7fca1dac7c80, 0x72)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:351 +0x85 fp=0xc0007c5b88 sp=0xc0007c5b68 pc=0x4b58c5
internal/poll.(*pollDesc).wait(0xc0001b01a0, 0x72, 0x0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:84 +0xb1 fp=0xc0007c5bc8 sp=0xc0007c5b88 pc=0x58ac31
internal/poll.(*pollDesc).waitRead(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:89
internal/poll.(*FD).Read(0xc0001b0180, {0xc0000ec800, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_unix.go:165 +0x453 fp=0xc0007c5cb8 sp=0xc0007c5bc8 pc=0x58c813
net.(*netFD).Read(0xc0001b0180, {0xc0000ec800, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/fd_posix.go:55 +0x4b fp=0xc0007c5d08 sp=0xc0007c5cb8 pc=0x85b0cb
net.(*conn).Read(0xc00099e038, {0xc0000ec800, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/net.go:194 +0xad fp=0xc0007c5d88 sp=0xc0007c5d08 pc=0x87aa0d
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer(0xc000626820, {0x24c48e0?, 0xc000992000?}, 0xc000601080)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:385 +0x786 fp=0xc0007c5f48 sp=0xc0007c5d88 pc=0x1a7d946
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1(0xc000601080)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5e fp=0xc0007c5fb8 sp=0xc0007c5f48 pc=0x1a7d15e
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x42 fp=0xc0007c5fe0 sp=0xc0007c5fb8 pc=0x1a7d0c2
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007c5fe8 sp=0xc0007c5fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery in goroutine 152
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49d

goroutine 77 gp=0xc0009d8540 m=nil [IO wait]:
runtime.gopark(0x0?, 0x9?, 0x0?, 0xcc?, 0x400?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc000a93b30 sp=0xc000a93b10 pc=0x4b66ce
runtime.netpollblock(0x4c2171?, 0x58c813?, 0x0?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:575 +0xf7 fp=0xc000a93b68 sp=0xc000a93b30 pc=0x477637
internal/poll.runtime_pollWait(0x7fca1dac7a50, 0x72)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/netpoll.go:351 +0x85 fp=0xc000a93b88 sp=0xc000a93b68 pc=0x4b58c5
internal/poll.(*pollDesc).wait(0xc0001b0220, 0x72, 0x0)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:84 +0xb1 fp=0xc000a93bc8 sp=0xc000a93b88 pc=0x58ac31
internal/poll.(*pollDesc).waitRead(...)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_poll_runtime.go:89
internal/poll.(*FD).Read(0xc0001b0200, {0xc0000ecc00, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/internal/poll/fd_unix.go:165 +0x453 fp=0xc000a93cb8 sp=0xc000a93bc8 pc=0x58c813
net.(*netFD).Read(0xc0001b0200, {0xc0000ecc00, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/fd_posix.go:55 +0x4b fp=0xc000a93d08 sp=0xc000a93cb8 pc=0x85b0cb
net.(*conn).Read(0xc00099e040, {0xc0000ecc00, 0x400, 0x400})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/net/net.go:194 +0xad fp=0xc000a93d88 sp=0xc000a93d08 pc=0x87aa0d
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer(0xc000626820, {0x24c48e0?, 0xc000992000?}, 0xc0006010e0)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:385 +0x786 fp=0xc000a93f48 sp=0xc000a93d88 pc=0x1a7d946
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1(0xc0006010e0)
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5e fp=0xc000a93fb8 sp=0xc000a93f48 pc=0x1a7d15e
github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x42 fp=0xc000a93fe0 sp=0xc000a93fb8 pc=0x1a7d0c2
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc000a93fe8 sp=0xc000a93fe0 pc=0x4bee41
created by github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery in goroutine 152
	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49d

goroutine 167 gp=0xc00010ac40 m=nil [select]:
runtime.gopark(0xc0009f5f48?, 0x2?, 0x98?, 0x5c?, 0xc0009f5e1c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0009f5c58 sp=0xc0009f5c38 pc=0x4b66ce
runtime.selectgo(0xc0009f5f48, 0xc0009f5e18, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0009f5dc8 sp=0xc0009f5c58 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).startNetworkSubscriber.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/subscriber_notifee.go:48 +0x259 fp=0xc0009f5fe0 sp=0xc0009f5dc8 pc=0x14f91f9
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0009f5fe8 sp=0xc0009f5fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).startNetworkSubscriber in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/subscriber_notifee.go:43 +0x567

goroutine 168 gp=0xc00010ae00 m=nil [select]:
runtime.gopark(0xc0009f4f80?, 0x2?, 0x88?, 0x4d?, 0xc0009f4eec?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0009f4d48 sp=0xc0009f4d28 pc=0x4b66ce
runtime.selectgo(0xc0009f4f80, 0xc0009f4ee8, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0009f4eb8 sp=0xc0009f4d48 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).persistRTPeersInPeerStore(0xc0002f5508)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:554 +0x1b3 fp=0xc0009f4fc0 sp=0xc0009f4eb8 pc=0x14d15b3
github.com/libp2p/go-libp2p-kad-dht.New.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:236 +0x34 fp=0xc0009f4fe0 sp=0xc0009f4fc0 pc=0x14ce1d4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0009f4fe8 sp=0xc0009f4fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht.New in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:236 +0xc35

goroutine 169 gp=0xc00010afc0 m=nil [select]:
runtime.gopark(0xc0007b8f68?, 0x4?, 0x10?, 0x8d?, 0xc0007b8e80?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007b8cd0 sp=0xc0007b8cb0 pc=0x4b66ce
runtime.selectgo(0xc0007b8f68, 0xc0007b8e78, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007b8e40 sp=0xc0007b8cd0 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).rtPeerLoop.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:609 +0x22c fp=0xc0007b8fe0 sp=0xc0007b8e40 pc=0x14d234c
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007b8fe8 sp=0xc0007b8fe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).rtPeerLoop in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:601 +0xa5

goroutine 170 gp=0xc00010b180 m=nil [select]:
runtime.gopark(0xc0007bfee8?, 0x3?, 0x40?, 0xfc?, 0xc0007bfdca?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007bfc00 sp=0xc0007bfbe0 pc=0x4b66ce
runtime.selectgo(0xc0007bfee8, 0xc0007bfdc4, 0x2?, 0x0, 0x1?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007bfd70 sp=0xc0007bfc00 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht/rtrefresh.(*RtRefreshManager).loop(0xc00060bcc0)
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/rtrefresh/rt_refresh_manager.go:197 +0x40c fp=0xc0007bffc0 sp=0xc0007bfd70 pc=0x14bac4c
github.com/libp2p/go-libp2p-kad-dht/rtrefresh.(*RtRefreshManager).Start.gowrap1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/rtrefresh/rt_refresh_manager.go:93 +0x34 fp=0xc0007bffe0 sp=0xc0007bffc0 pc=0x14b8bb4
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007bffe8 sp=0xc0007bffe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht/rtrefresh.(*RtRefreshManager).Start in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/rtrefresh/rt_refresh_manager.go:93 +0xa5

goroutine 171 gp=0xc00010b340 m=nil [select]:
runtime.gopark(0xc0007bbf90?, 0x3?, 0x70?, 0xbd?, 0xc0007bbeda?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007bbd30 sp=0xc0007bbd10 pc=0x4b66ce
runtime.selectgo(0xc0007bbf90, 0xc0007bbed4, 0x0?, 0x0, 0x0?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007bbea0 sp=0xc0007bbd30 pc=0x492805
github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runFixLowPeersLoop.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:476 +0x28c fp=0xc0007bbfe0 sp=0xc0007bbea0 pc=0x14d0c4c
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007bbfe8 sp=0xc0007bbfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p-kad-dht.(*IpfsDHT).runFixLowPeersLoop in goroutine 9
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p-kad-dht@v0.25.0/dht.go:467 +0xa5

goroutine 227 gp=0xc00088c380 m=nil [select]:
runtime.gopark(0xc0007bcfa0?, 0x2?, 0xd8?, 0xcd?, 0xc0007bcf3c?)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/proc.go:435 +0xce fp=0xc0007bcd98 sp=0xc0007bcd78 pc=0x4b66ce
runtime.selectgo(0xc0007bcfa0, 0xc0007bcf38, 0xc00014ceb0?, 0x0, 0xc0007a26e8?, 0x1)
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/select.go:351 +0x985 fp=0xc0007bcf08 sp=0xc0007bcd98 pc=0x492805
github.com/libp2p/go-libp2p/p2p/protocol/identify.(*idService).loop.func1()
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/id.go:258 +0x169 fp=0xc0007bcfe0 sp=0xc0007bcf08 pc=0x1987029
runtime.goexit({})
	/home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc0007bcfe8 sp=0xc0007bcfe0 pc=0x4bee41
created by github.com/libp2p/go-libp2p/p2p/protocol/identify.(*idService).loop in goroutine 113
	/home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/protocol/identify/id.go:254 +0x68b
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/consensus	2.045s
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/errors		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/inference		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/integration		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/logging		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/memory		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/models		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/monitoring		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/network		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/observability		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/ollama/api		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/onboarding		coverage: 0.0% of statements
=== RUN   TestNewP2PNode
=== RUN   TestNewP2PNode/default_config
2025/08/10 18:00:01 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:01 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:01 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:01 P2P host created with ID: QmcPbsMZhtTi3ph2gjShvyJ5dPQQ6BTcPjfDX8NWpLbqw2
2025/08/10 18:00:01 Listen addresses: [/ip4/127.0.0.1/tcp/41899 /ip4/172.31.233.13/tcp/41899 /ip6/::1/tcp/36917]
==================
WARNING: DATA RACE
Read at 0x00c0005d4380 by goroutine 131:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0x92
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0005d4380 by goroutine 130:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xaa
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 131 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33

Goroutine 130 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33
==================
==================
WARNING: DATA RACE
Write at 0x00c0005d4380 by goroutine 131:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xaa
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0005d4380 by goroutine 132:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xaa
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 131 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33

Goroutine 132 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33
==================
2025/08/10 18:00:01 No bootstrap peers configured
2025/08/10 18:00:01 DHT initialized in auto mode
2025/08/10 18:00:01 mDNS discovery initialized
2025/08/10 18:00:01 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:01 Rendezvous discovery initialized
2025/08/10 18:00:01 Hybrid discovery strategy initialized
2025/08/10 18:00:02 P2P node initialized with ID: QmcPbsMZhtTi3ph2gjShvyJ5dPQQ6BTcPjfDX8NWpLbqw2
    node_test.go:76: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:76
        	Error:      	Received unexpected error:
        	            	node not started
        	Test:       	TestNewP2PNode/default_config
    testing.go:1490: race detected during execution of test
=== RUN   TestNewP2PNode/custom_config
2025/08/10 18:00:02 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:02 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:02 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:02 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:02 P2P host created with ID: QmbAcJHKQFzmDA75kR6Ld41SCBT8cmacHPuA5i1P3GuvbL
2025/08/10 18:00:02 Listen addresses: [/ip4/127.0.0.1/tcp/43301]
2025/08/10 18:00:02 No bootstrap peers configured
2025/08/10 18:00:02 DHT initialized in auto mode
2025/08/10 18:00:02 mDNS discovery initialized
2025/08/10 18:00:02 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:02 Rendezvous discovery initialized
2025/08/10 18:00:02 Hybrid discovery strategy initialized
2025/08/10 18:00:03 P2P node initialized with ID: QmbAcJHKQFzmDA75kR6Ld41SCBT8cmacHPuA5i1P3GuvbL
    node_test.go:76: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:76
        	Error:      	Received unexpected error:
        	            	node not started
        	Test:       	TestNewP2PNode/custom_config
=== RUN   TestNewP2PNode/invalid_listen_address
2025/08/10 18:00:03 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:04 Invalid listen address invalid-address: failed to parse multiaddr "invalid-address": must begin with /
2025/08/10 18:00:04 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:04 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:04 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:04 P2P host created with ID: QmfVTDJxygvKT2YgaYGWrJzCyErriNpkthHybyqmWS3rr7
2025/08/10 18:00:04 Listen addresses: []
2025/08/10 18:00:04 No bootstrap peers configured
2025/08/10 18:00:04 DHT initialized in auto mode
2025/08/10 18:00:04 mDNS discovery initialized
2025/08/10 18:00:04 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:04 Rendezvous discovery initialized
2025/08/10 18:00:04 Hybrid discovery strategy initialized
2025/08/10 18:00:05 P2P node initialized with ID: QmfVTDJxygvKT2YgaYGWrJzCyErriNpkthHybyqmWS3rr7
    node_test.go:57: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:57
        	Error:      	An error is expected but got nil.
        	Test:       	TestNewP2PNode/invalid_listen_address
    node_test.go:58: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:58
        	Error:      	Expected nil, but got: &p2p.P2PNode{host:(*host.P2PHost)(0xc000888c00), config:(*config.NodeConfig)(0xc0006a8160), discoveryEngine:(*discovery.DiscoveryEngine)(0xc000ba2240), securityManager:(*security.SecurityManager)(0xc000031420), advancedSecurity:(*security.SecurityManager)(nil), resourceAdvertiser:(*resources.ResourceAdvertiser)(0xc000ba2c00), contentRouter:(*routing.ContentRouter)(0xc000680840), capabilities:(*resources.NodeCapabilities)(nil), resourceMetrics:(*resources.ResourceMetrics)(nil), eventHandlers:map[string][]p2p.EventHandler{}, eventMux:sync.RWMutex{w:sync.Mutex{_:sync.noCopy{}, mu:sync.Mutex{state:0, sema:0x0}}, writerSem:0x0, readerSem:0x0, readerCount:atomic.Int32{_:atomic.noCopy{}, v:0}, readerWait:atomic.Int32{_:atomic.noCopy{}, v:0}}, metrics:(*p2p.NodeMetrics)(0xc000680370), metricsIntegration:(*observability.MetricsIntegration)(nil), ctx:(*context.cancelCtx)(0xc000857450), cancel:(context.CancelFunc)(0x6a1600), wg:sync.WaitGroup{noCopy:sync.noCopy{}, state:atomic.Uint64{_:atomic.noCopy{}, _:atomic.align64{}, v:0x0}, sema:0x0}, started:false, startedMux:sync.RWMutex{w:sync.Mutex{_:sync.noCopy{}, mu:sync.Mutex{state:0, sema:0x0}}, writerSem:0x0, readerSem:0x0, readerCount:atomic.Int32{_:atomic.noCopy{}, v:0}, readerWait:atomic.Int32{_:atomic.noCopy{}, v:0}}}
        	Test:       	TestNewP2PNode/invalid_listen_address
2025/08/10 18:00:05 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
--- FAIL: TestNewP2PNode (6.00s)
    --- FAIL: TestNewP2PNode/default_config (3.07s)
    --- FAIL: TestNewP2PNode/custom_config (1.28s)
    --- FAIL: TestNewP2PNode/invalid_listen_address (1.65s)
=== RUN   TestNewNode
2025/08/10 18:00:05 Invalid listen address 127.0.0.1:0: failed to parse multiaddr "127.0.0.1:0": must begin with /
2025/08/10 18:00:05 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:05 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:05 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:05 P2P host created with ID: QmcCmcDzFk8DkJqWjkRwbddKS1onAxNeu1ozcNgFEkDaEt
2025/08/10 18:00:05 Listen addresses: []
2025/08/10 18:00:05 No bootstrap peers configured
2025/08/10 18:00:05 DHT initialized in auto mode
2025/08/10 18:00:05 mDNS discovery initialized
2025/08/10 18:00:05 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:05 Rendezvous discovery initialized
2025/08/10 18:00:05 Hybrid discovery strategy initialized
==================
WARNING: DATA RACE
Read at 0x00c0005d4390 by goroutine 131:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:387 +0xd04
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0005d4390 by goroutine 132:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:387 +0xd25
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 131 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33

Goroutine 132 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33
==================
2025/08/10 18:00:06 P2P node initialized with ID: QmcCmcDzFk8DkJqWjkRwbddKS1onAxNeu1ozcNgFEkDaEt
    node_test.go:102: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:102
        	Error:      	Received unexpected error:
        	            	node not started
        	Test:       	TestNewNode
    testing.go:1490: race detected during execution of test
--- FAIL: TestNewNode (1.29s)
=== RUN   TestNode_StartStop
2025/08/10 18:00:06 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:07 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:07 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:07 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:07 P2P host created with ID: QmNa3hnVJE3J9b2M3duYHiPpsA2oj9DfQwDgtwfFQ38wk2
2025/08/10 18:00:07 Listen addresses: [/ip4/127.0.0.1/tcp/46213 /ip4/172.31.233.13/tcp/46213 /ip6/::1/tcp/37733]
2025/08/10 18:00:07 No bootstrap peers configured
2025/08/10 18:00:07 DHT initialized in auto mode
2025/08/10 18:00:07 mDNS discovery initialized
2025/08/10 18:00:07 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:07 Rendezvous discovery initialized
2025/08/10 18:00:07 Hybrid discovery strategy initialized
2025/08/10 18:00:10 P2P node initialized with ID: QmNa3hnVJE3J9b2M3duYHiPpsA2oj9DfQwDgtwfFQ38wk2
2025/08/10 18:00:10 Starting P2P node...
2025/08/10 18:00:10 Starting discovery engine with 5 strategies
2025/08/10 18:00:10 Discovery engine started
2025/08/10 18:00:10 Starting resource advertiser
2025/08/10 18:00:10 Resource advertiser started
2025/08/10 18:00:10 Starting content router
2025/08/10 18:00:10 Content router started
2025/08/10 18:00:10 P2P node started successfully
2025/08/10 18:00:10 Node ID: QmNa3hnVJE3J9b2M3duYHiPpsA2oj9DfQwDgtwfFQ38wk2
2025/08/10 18:00:10 Listen addresses: [/ip4/127.0.0.1/tcp/46213 /ip4/172.31.233.13/tcp/46213 /ip6/::1/tcp/37733]
2025/08/10 18:00:10 Stopping P2P node...
2025/08/10 18:00:10 Stopping discovery engine
2025/08/10 18:00:10 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:10 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:10 Discovery engine stopped
2025/08/10 18:00:10 Stopping resource advertiser
2025/08/10 18:00:10 Resource advertiser stopped
2025/08/10 18:00:10 Stopping content router
2025/08/10 18:00:10 Content router stopped
2025/08/10 18:00:10 NAT traversal manager closed
2025/08/10 18:00:10 P2P node stopped
--- PASS: TestNode_StartStop (3.11s)
=== RUN   TestNode_GetStatus
2025/08/10 18:00:10 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:10 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:10 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:10 P2P host created with ID: QmXsosUrdWq8dZPnSBG3jmWv579TY6e3UBxeuP6ftUmYRN
2025/08/10 18:00:10 Listen addresses: [/ip4/127.0.0.1/tcp/43649 /ip4/172.31.233.13/tcp/43649 /ip6/::1/tcp/33497]
2025/08/10 18:00:10 No bootstrap peers configured
2025/08/10 18:00:10 DHT initialized in auto mode
2025/08/10 18:00:10 mDNS discovery initialized
2025/08/10 18:00:10 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:10 Rendezvous discovery initialized
2025/08/10 18:00:10 Hybrid discovery strategy initialized
2025/08/10 18:00:11 P2P node initialized with ID: QmXsosUrdWq8dZPnSBG3jmWv579TY6e3UBxeuP6ftUmYRN
2025/08/10 18:00:11 Starting P2P node...
2025/08/10 18:00:11 Starting discovery engine with 5 strategies
2025/08/10 18:00:11 Discovery engine started
2025/08/10 18:00:11 Starting resource advertiser
2025/08/10 18:00:11 Resource advertiser started
2025/08/10 18:00:11 Starting content router
2025/08/10 18:00:11 Content router started
2025/08/10 18:00:11 P2P node started successfully
2025/08/10 18:00:11 Node ID: QmXsosUrdWq8dZPnSBG3jmWv579TY6e3UBxeuP6ftUmYRN
2025/08/10 18:00:11 Listen addresses: [/ip4/127.0.0.1/tcp/43649 /ip4/172.31.233.13/tcp/43649 /ip6/::1/tcp/33497]
2025/08/10 18:00:11 Stopping P2P node...
2025/08/10 18:00:11 Stopping discovery engine
2025/08/10 18:00:11 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:11 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:11 Discovery engine stopped
2025/08/10 18:00:11 Stopping resource advertiser
2025/08/10 18:00:11 Resource advertiser stopped
2025/08/10 18:00:11 Stopping content router
2025/08/10 18:00:11 Content router stopped
2025/08/10 18:00:11 NAT traversal manager closed
2025/08/10 18:00:11 P2P node stopped
--- PASS: TestNode_GetStatus (1.71s)
=== RUN   TestNode_Capabilities
2025/08/10 18:00:12 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:12 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:12 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:12 P2P host created with ID: QmbSq7BA7dwkiWoAuoEm2APNqhTqPmCDxfvzCYm41vPWar
2025/08/10 18:00:12 Listen addresses: [/ip4/127.0.0.1/tcp/33023 /ip4/172.31.233.13/tcp/33023 /ip6/::1/tcp/40923]
2025/08/10 18:00:12 No bootstrap peers configured
2025/08/10 18:00:12 DHT initialized in auto mode
2025/08/10 18:00:12 mDNS discovery initialized
2025/08/10 18:00:12 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:12 Rendezvous discovery initialized
2025/08/10 18:00:12 Hybrid discovery strategy initialized
2025/08/10 18:00:12 P2P node initialized with ID: QmbSq7BA7dwkiWoAuoEm2APNqhTqPmCDxfvzCYm41vPWar
2025/08/10 18:00:12 Setting capabilities of type *resources.NodeCapabilities
--- PASS: TestNode_Capabilities (1.13s)
2025/08/10 18:00:12 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
=== RUN   TestNode_ResourceMetrics
2025/08/10 18:00:13 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:13 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:13 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:13 P2P host created with ID: QmaoFdGUcGtohRndsS8chyuvYqBS4k8tvV9877Erse3qVe
2025/08/10 18:00:13 Listen addresses: [/ip4/127.0.0.1/tcp/40789 /ip4/172.31.233.13/tcp/40789 /ip6/::1/tcp/39789]
2025/08/10 18:00:13 No bootstrap peers configured
2025/08/10 18:00:13 DHT initialized in auto mode
2025/08/10 18:00:13 mDNS discovery initialized
2025/08/10 18:00:13 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:13 Rendezvous discovery initialized
2025/08/10 18:00:13 Hybrid discovery strategy initialized
2025/08/10 18:00:13 P2P node initialized with ID: QmaoFdGUcGtohRndsS8chyuvYqBS4k8tvV9877Erse3qVe
--- PASS: TestNode_ResourceMetrics (1.11s)
2025/08/10 18:00:13 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
=== RUN   TestNode_EventSystem
2025/08/10 18:00:14 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:14 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:14 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:14 P2P host created with ID: QmZxUKb28XBmifRqumWJTwsLzWxaSSoT67PQRnmvi5NT16
2025/08/10 18:00:14 Listen addresses: [/ip4/127.0.0.1/tcp/45825 /ip4/172.31.233.13/tcp/45825 /ip6/::1/tcp/38251]
2025/08/10 18:00:14 No bootstrap peers configured
2025/08/10 18:00:14 DHT initialized in auto mode
2025/08/10 18:00:14 mDNS discovery initialized
2025/08/10 18:00:14 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:14 Rendezvous discovery initialized
2025/08/10 18:00:14 Hybrid discovery strategy initialized
==================
WARNING: DATA RACE
Write at 0x00c00002f510 by goroutine 727:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:387 +0xd25
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c00002f510 by goroutine 728:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:387 +0xd25
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x5d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 727 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33

Goroutine 728 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x49c
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x156
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.(*P2PHost).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:473 +0xbb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:296 +0x33
==================
2025/08/10 18:00:15 P2P node initialized with ID: QmZxUKb28XBmifRqumWJTwsLzWxaSSoT67PQRnmvi5NT16
2025/08/10 18:00:15 Setting capabilities of type *resources.NodeCapabilities
==================
WARNING: DATA RACE
Read at 0x00c000918bb8 by goroutine 1025:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:254 +0x2d1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:230 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Previous write at 0x00c000918bb8 by goroutine 1148:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:238 +0xd2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).emitEvent.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:598 +0x41

Goroutine 1025 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:91 +0x164

Goroutine 1148 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).emitEvent()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:598 +0x2bb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).SetCapabilities()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:477 +0x164
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:248 +0x2b9
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:230 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
==================
WARNING: DATA RACE
Read at 0x00c000c20038 by goroutine 1025:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:255 +0x344
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:230 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Previous write at 0x00c000c20038 by goroutine 1148:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:238 +0x8b
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).emitEvent.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:598 +0x41

Goroutine 1025 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:91 +0x164

Goroutine 1148 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).emitEvent()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:598 +0x2bb
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).SetCapabilities()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:477 +0x164
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:248 +0x2b9
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_EventSystem()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:230 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
    testing.go:1490: race detected during execution of test
--- FAIL: TestNode_EventSystem (1.82s)
=== RUN   TestNode_ContentOperations
2025/08/10 18:00:15 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:16 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:16 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:16 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:16 P2P host created with ID: QmY3s1HE8jGEFJeNs4RbfdtGhquVA6kPaPiT15dhwTDVkx
2025/08/10 18:00:16 Listen addresses: [/ip4/127.0.0.1/tcp/34391 /ip4/172.31.233.13/tcp/34391 /ip6/::1/tcp/44369]
2025/08/10 18:00:16 No bootstrap peers configured
2025/08/10 18:00:16 DHT initialized in auto mode
2025/08/10 18:00:16 mDNS discovery initialized
2025/08/10 18:00:16 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:16 Rendezvous discovery initialized
2025/08/10 18:00:16 Hybrid discovery strategy initialized
2025/08/10 18:00:18 P2P node initialized with ID: QmY3s1HE8jGEFJeNs4RbfdtGhquVA6kPaPiT15dhwTDVkx
2025/08/10 18:00:18 Starting P2P node...
2025/08/10 18:00:18 Starting discovery engine with 5 strategies
2025/08/10 18:00:18 Discovery engine started
2025/08/10 18:00:18 Starting resource advertiser
2025/08/10 18:00:18 Resource advertiser started
2025/08/10 18:00:18 Starting content router
2025/08/10 18:00:18 Content router started
2025/08/10 18:00:18 P2P node started successfully
2025/08/10 18:00:18 Node ID: QmY3s1HE8jGEFJeNs4RbfdtGhquVA6kPaPiT15dhwTDVkx
2025/08/10 18:00:18 Listen addresses: [/ip4/127.0.0.1/tcp/34391 /ip4/172.31.233.13/tcp/34391 /ip6/::1/tcp/44369]
2025/08/10 18:00:18 Publishing content: test-content
2025/08/10 18:00:18 Requesting content: test-content with priority 1
2025/08/10 18:00:18 Finding content: test-content
2025/08/10 18:00:18 Stopping P2P node...
2025/08/10 18:00:18 Processing content request: req-1754866818039054027
2025/08/10 18:00:18 Failed content request: req-1754866818039054027
2025/08/10 18:00:18 Stopping discovery engine
2025/08/10 18:00:18 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:18 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:18 Discovery engine stopped
2025/08/10 18:00:18 Stopping resource advertiser
2025/08/10 18:00:18 Resource advertiser stopped
2025/08/10 18:00:18 Stopping content router
2025/08/10 18:00:18 Content router stopped
2025/08/10 18:00:18 NAT traversal manager closed
2025/08/10 18:00:18 P2P node stopped
--- PASS: TestNode_ContentOperations (2.26s)
=== RUN   TestNode_PeerOperations
2025/08/10 18:00:18 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:18 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:18 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:18 P2P host created with ID: QmTeCg4sf9tmzAZBiq5etRRBeULvTYGfP8jqjXYZuDjRce
2025/08/10 18:00:18 Listen addresses: [/ip4/127.0.0.1/tcp/33279]
2025/08/10 18:00:18 No bootstrap peers configured
2025/08/10 18:00:18 DHT initialized in auto mode
2025/08/10 18:00:18 mDNS discovery initialized
2025/08/10 18:00:18 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:18 Rendezvous discovery initialized
2025/08/10 18:00:18 Hybrid discovery strategy initialized
2025/08/10 18:00:19 P2P node initialized with ID: QmTeCg4sf9tmzAZBiq5etRRBeULvTYGfP8jqjXYZuDjRce
2025/08/10 18:00:20 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:20 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:20 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:20 P2P host created with ID: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:20 Listen addresses: [/ip4/127.0.0.1/tcp/46769]
2025/08/10 18:00:20 No bootstrap peers configured
2025/08/10 18:00:20 DHT initialized in auto mode
2025/08/10 18:00:20 mDNS discovery initialized
2025/08/10 18:00:20 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:20 Rendezvous discovery initialized
2025/08/10 18:00:20 Hybrid discovery strategy initialized
2025/08/10 18:00:23 P2P node initialized with ID: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Starting P2P node...
2025/08/10 18:00:23 Starting discovery engine with 5 strategies
2025/08/10 18:00:23 Discovery engine started
2025/08/10 18:00:23 Starting resource advertiser
2025/08/10 18:00:23 Resource advertiser started
2025/08/10 18:00:23 Starting content router
2025/08/10 18:00:23 Content router started
2025/08/10 18:00:23 P2P node started successfully
2025/08/10 18:00:23 Node ID: QmTeCg4sf9tmzAZBiq5etRRBeULvTYGfP8jqjXYZuDjRce
2025/08/10 18:00:23 Listen addresses: [/ip4/127.0.0.1/tcp/33279]
2025/08/10 18:00:23 Starting P2P node...
2025/08/10 18:00:23 Starting discovery engine with 5 strategies
2025/08/10 18:00:23 Discovery engine started
2025/08/10 18:00:23 Starting resource advertiser
2025/08/10 18:00:23 Resource advertiser started
2025/08/10 18:00:23 Starting content router
2025/08/10 18:00:23 Content router started
2025/08/10 18:00:23 P2P node started successfully
2025/08/10 18:00:23 Node ID: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Listen addresses: [/ip4/127.0.0.1/tcp/46769]
2025/08/10 18:00:23 Local geographic location detected
2025/08/10 18:00:23 Local geographic location detected
2025/08/10 18:00:23 Connected to peer: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Connected to peer: QmTeCg4sf9tmzAZBiq5etRRBeULvTYGfP8jqjXYZuDjRce
2025/08/10 18:00:23 Connected to peer: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Disconnected from peer: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Disconnected from peer: QmdcwsXeLTkyyDUgjtJT6Q2p1PHh4ReLRaTradEhiKrttf
2025/08/10 18:00:23 Disconnected from peer: QmTeCg4sf9tmzAZBiq5etRRBeULvTYGfP8jqjXYZuDjRce
2025/08/10 18:00:23 Stopping P2P node...
2025/08/10 18:00:23 Stopping discovery engine
2025/08/10 18:00:23 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:23 Discovery engine stopped
2025/08/10 18:00:23 Stopping resource advertiser
2025/08/10 18:00:23 Resource advertiser stopped
2025/08/10 18:00:23 Stopping content router
2025/08/10 18:00:23 Content router stopped
2025/08/10 18:00:23 NAT traversal manager closed
2025/08/10 18:00:23 P2P node stopped
2025/08/10 18:00:23 Stopping P2P node...
2025/08/10 18:00:23 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:23 Stopping discovery engine
2025/08/10 18:00:23 Discovery engine stopped
2025/08/10 18:00:23 Stopping resource advertiser
2025/08/10 18:00:23 Resource advertiser stopped
2025/08/10 18:00:23 Stopping content router
2025/08/10 18:00:23 Content router stopped
2025/08/10 18:00:23 NAT traversal manager closed
2025/08/10 18:00:23 P2P node stopped
--- PASS: TestNode_PeerOperations (4.04s)
=== RUN   TestNode_MetricsCollection
2025/08/10 18:00:24 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:24 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:24 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:24 P2P host created with ID: QmTU4ZiujNaUmtoz6AuYkZRViiA4vYTv7zQhBAWta23vKv
2025/08/10 18:00:24 Listen addresses: [/ip4/127.0.0.1/tcp/45293 /ip4/172.31.233.13/tcp/45293 /ip6/::1/tcp/39819]
2025/08/10 18:00:24 No bootstrap peers configured
2025/08/10 18:00:24 DHT initialized in auto mode
2025/08/10 18:00:24 mDNS discovery initialized
2025/08/10 18:00:24 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:24 Rendezvous discovery initialized
2025/08/10 18:00:24 Hybrid discovery strategy initialized
2025/08/10 18:00:25 P2P node initialized with ID: QmTU4ZiujNaUmtoz6AuYkZRViiA4vYTv7zQhBAWta23vKv
2025/08/10 18:00:25 Starting P2P node...
2025/08/10 18:00:25 Starting discovery engine with 5 strategies
2025/08/10 18:00:25 Discovery engine started
2025/08/10 18:00:25 Starting resource advertiser
2025/08/10 18:00:25 Resource advertiser started
2025/08/10 18:00:25 Starting content router
2025/08/10 18:00:25 Content router started
2025/08/10 18:00:25 P2P node started successfully
2025/08/10 18:00:25 Node ID: QmTU4ZiujNaUmtoz6AuYkZRViiA4vYTv7zQhBAWta23vKv
2025/08/10 18:00:25 Listen addresses: [/ip4/127.0.0.1/tcp/45293 /ip4/172.31.233.13/tcp/45293 /ip6/::1/tcp/39819]
2025/08/10 18:00:25 Local geographic location detected
    node_test.go:391: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:391
        	Error:      	Should be true
        	Test:       	TestNode_MetricsCollection
2025/08/10 18:00:25 Stopping P2P node...
2025/08/10 18:00:25 Stopping discovery engine
2025/08/10 18:00:25 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:25 Discovery engine stopped
2025/08/10 18:00:25 Stopping resource advertiser
2025/08/10 18:00:25 Resource advertiser stopped
2025/08/10 18:00:25 Stopping content router
2025/08/10 18:00:25 Content router stopped
2025/08/10 18:00:25 NAT traversal manager closed
2025/08/10 18:00:25 P2P node stopped
--- FAIL: TestNode_MetricsCollection (1.71s)
=== RUN   TestNode_ResourceMonitoring
2025/08/10 18:00:25 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:25 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:25 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:25 P2P host created with ID: QmQkA9Ge7dken2BkcBzt4b1K8QwVVxhbv1JpTBDQnYTaTJ
2025/08/10 18:00:25 Listen addresses: [/ip4/127.0.0.1/tcp/38401 /ip4/172.31.233.13/tcp/38401 /ip6/::1/tcp/46597]
2025/08/10 18:00:25 No bootstrap peers configured
2025/08/10 18:00:25 DHT initialized in auto mode
2025/08/10 18:00:25 mDNS discovery initialized
2025/08/10 18:00:25 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:25 Rendezvous discovery initialized
2025/08/10 18:00:25 Hybrid discovery strategy initialized
2025/08/10 18:00:26 P2P node initialized with ID: QmQkA9Ge7dken2BkcBzt4b1K8QwVVxhbv1JpTBDQnYTaTJ
2025/08/10 18:00:26 Starting P2P node...
2025/08/10 18:00:26 Starting discovery engine with 5 strategies
2025/08/10 18:00:26 Discovery engine started
2025/08/10 18:00:26 Starting resource advertiser
2025/08/10 18:00:26 Resource advertiser started
2025/08/10 18:00:26 Starting content router
2025/08/10 18:00:26 Content router started
2025/08/10 18:00:26 P2P node started successfully
2025/08/10 18:00:26 Node ID: QmQkA9Ge7dken2BkcBzt4b1K8QwVVxhbv1JpTBDQnYTaTJ
2025/08/10 18:00:26 Listen addresses: [/ip4/127.0.0.1/tcp/38401 /ip4/172.31.233.13/tcp/38401 /ip6/::1/tcp/46597]
2025/08/10 18:00:26 Local geographic location detected
2025/08/10 18:00:27 Stopping P2P node...
2025/08/10 18:00:27 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:27 Stopping discovery engine
2025/08/10 18:00:27 Discovery engine stopped
2025/08/10 18:00:27 Stopping resource advertiser
2025/08/10 18:00:27 Resource advertiser stopped
2025/08/10 18:00:27 Stopping content router
2025/08/10 18:00:27 Content router stopped
2025/08/10 18:00:27 NAT traversal manager closed
2025/08/10 18:00:27 P2P node stopped
--- PASS: TestNode_ResourceMonitoring (1.67s)
=== RUN   TestNode_SecurityOperations
2025/08/10 18:00:27 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:27 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:27 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:27 P2P host created with ID: Qmf8VnxiJDokzCobqQXCkexjnRHZm69C8eAhqsLUjhDDbt
2025/08/10 18:00:27 Listen addresses: [/ip4/127.0.0.1/tcp/40597 /ip4/172.31.233.13/tcp/40597 /ip6/::1/tcp/42541]
2025/08/10 18:00:27 No bootstrap peers configured
2025/08/10 18:00:27 DHT initialized in auto mode
2025/08/10 18:00:27 mDNS discovery initialized
2025/08/10 18:00:27 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:27 Rendezvous discovery initialized
2025/08/10 18:00:27 Hybrid discovery strategy initialized
2025/08/10 18:00:28 P2P node initialized with ID: Qmf8VnxiJDokzCobqQXCkexjnRHZm69C8eAhqsLUjhDDbt
2025/08/10 18:00:28 Starting P2P node...
2025/08/10 18:00:28 Starting discovery engine with 5 strategies
2025/08/10 18:00:28 Discovery engine started
2025/08/10 18:00:28 Starting resource advertiser
2025/08/10 18:00:28 Resource advertiser started
2025/08/10 18:00:28 Starting content router
2025/08/10 18:00:28 Content router started
2025/08/10 18:00:28 P2P node started successfully
2025/08/10 18:00:28 Node ID: Qmf8VnxiJDokzCobqQXCkexjnRHZm69C8eAhqsLUjhDDbt
2025/08/10 18:00:28 Listen addresses: [/ip4/127.0.0.1/tcp/40597 /ip4/172.31.233.13/tcp/40597 /ip6/::1/tcp/42541]
    node_test.go:437: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:437
        	Error:      	An error is expected but got nil.
        	Test:       	TestNode_SecurityOperations
2025/08/10 18:00:28 Stopping P2P node...
2025/08/10 18:00:28 Stopping discovery engine
2025/08/10 18:00:28 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:28 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:28 Discovery engine stopped
2025/08/10 18:00:28 Stopping resource advertiser
2025/08/10 18:00:28 Resource advertiser stopped
2025/08/10 18:00:28 Stopping content router
2025/08/10 18:00:28 Content router stopped
2025/08/10 18:00:28 NAT traversal manager closed
2025/08/10 18:00:28 P2P node stopped
--- FAIL: TestNode_SecurityOperations (1.63s)
=== RUN   TestNode_ErrorHandling
=== RUN   TestNode_ErrorHandling/operations_on_stopped_node
2025/08/10 18:00:28 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:28 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:28 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:28 P2P host created with ID: QmSuHn6df5b7HraWW4Bvztvnbhda4WofNcUjRjqRj3MedP
2025/08/10 18:00:28 Listen addresses: [/ip4/127.0.0.1/tcp/43891 /ip4/172.31.233.13/tcp/43891 /ip6/::1/tcp/35515]
2025/08/10 18:00:28 No bootstrap peers configured
2025/08/10 18:00:28 DHT initialized in auto mode
2025/08/10 18:00:28 mDNS discovery initialized
2025/08/10 18:00:28 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:28 Rendezvous discovery initialized
2025/08/10 18:00:28 Hybrid discovery strategy initialized
2025/08/10 18:00:30 P2P node initialized with ID: QmSuHn6df5b7HraWW4Bvztvnbhda4WofNcUjRjqRj3MedP
=== RUN   TestNode_ErrorHandling/invalid_peer_connection
2025/08/10 18:00:30 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:30 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:30 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:30 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:30 P2P host created with ID: QmdfAZTTggZwsqptx5fQNMECPvKj7KmHNfWv3uNuocg6gm
2025/08/10 18:00:30 Listen addresses: [/ip4/127.0.0.1/tcp/43193 /ip4/172.31.233.13/tcp/43193 /ip6/::1/tcp/34905]
2025/08/10 18:00:30 No bootstrap peers configured
2025/08/10 18:00:30 DHT initialized in auto mode
2025/08/10 18:00:30 mDNS discovery initialized
2025/08/10 18:00:30 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:30 Rendezvous discovery initialized
2025/08/10 18:00:30 Hybrid discovery strategy initialized
2025/08/10 18:00:33 P2P node initialized with ID: QmdfAZTTggZwsqptx5fQNMECPvKj7KmHNfWv3uNuocg6gm
2025/08/10 18:00:33 Starting P2P node...
2025/08/10 18:00:33 Starting discovery engine with 5 strategies
2025/08/10 18:00:33 Discovery engine started
2025/08/10 18:00:33 Starting resource advertiser
2025/08/10 18:00:33 Resource advertiser started
2025/08/10 18:00:33 Starting content router
2025/08/10 18:00:33 Content router started
2025/08/10 18:00:33 P2P node started successfully
2025/08/10 18:00:33 Node ID: QmdfAZTTggZwsqptx5fQNMECPvKj7KmHNfWv3uNuocg6gm
2025/08/10 18:00:33 Listen addresses: [/ip4/127.0.0.1/tcp/43193 /ip4/172.31.233.13/tcp/43193 /ip6/::1/tcp/34905]
2025/08/10 18:00:33 Stopping P2P node...
2025/08/10 18:00:33 Stopping discovery engine
2025/08/10 18:00:33 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:33 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:33 Discovery engine stopped
2025/08/10 18:00:33 Stopping resource advertiser
2025/08/10 18:00:33 Resource advertiser stopped
2025/08/10 18:00:33 Stopping content router
2025/08/10 18:00:33 Content router stopped
2025/08/10 18:00:33 NAT traversal manager closed
2025/08/10 18:00:33 P2P node stopped
=== RUN   TestNode_ErrorHandling/operations_with_cancelled_context
2025/08/10 18:00:34 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:34 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:34 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:34 P2P host created with ID: QmPrRgbmGAz5WPMqHKoatPikzNMEg5hf6n9WpSbWmCU2qz
2025/08/10 18:00:34 Listen addresses: [/ip4/127.0.0.1/tcp/37577 /ip4/172.31.233.13/tcp/37577 /ip6/::1/tcp/34351]
2025/08/10 18:00:34 No bootstrap peers configured
2025/08/10 18:00:34 DHT initialized in auto mode
2025/08/10 18:00:34 mDNS discovery initialized
2025/08/10 18:00:34 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:34 Rendezvous discovery initialized
2025/08/10 18:00:34 Hybrid discovery strategy initialized
2025/08/10 18:00:34 P2P node initialized with ID: QmPrRgbmGAz5WPMqHKoatPikzNMEg5hf6n9WpSbWmCU2qz
2025/08/10 18:00:34 Starting P2P node...
2025/08/10 18:00:34 Starting discovery engine with 5 strategies
2025/08/10 18:00:34 Discovery engine started
2025/08/10 18:00:34 Starting resource advertiser
2025/08/10 18:00:34 Resource advertiser started
2025/08/10 18:00:34 Starting content router
2025/08/10 18:00:34 Content router started
2025/08/10 18:00:34 P2P node started successfully
2025/08/10 18:00:34 Node ID: QmPrRgbmGAz5WPMqHKoatPikzNMEg5hf6n9WpSbWmCU2qz
2025/08/10 18:00:34 Listen addresses: [/ip4/127.0.0.1/tcp/37577 /ip4/172.31.233.13/tcp/37577 /ip6/::1/tcp/34351]
2025/08/10 18:00:34 Publishing content: test-content
2025/08/10 18:00:34 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:34 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:34 Stopping P2P node...
2025/08/10 18:00:34 Stopping discovery engine
2025/08/10 18:00:34 Discovery engine stopped
2025/08/10 18:00:34 Stopping resource advertiser
2025/08/10 18:00:34 Resource advertiser stopped
2025/08/10 18:00:34 Stopping content router
2025/08/10 18:00:34 Content router stopped
2025/08/10 18:00:34 NAT traversal manager closed
2025/08/10 18:00:34 P2P node stopped
--- PASS: TestNode_ErrorHandling (4.88s)
    --- PASS: TestNode_ErrorHandling/operations_on_stopped_node (1.61s)
    --- PASS: TestNode_ErrorHandling/invalid_peer_connection (1.79s)
    --- PASS: TestNode_ErrorHandling/operations_with_cancelled_context (1.48s)
=== RUN   TestNode_StringRepresentation
2025/08/10 18:00:35 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:35 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:35 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:35 P2P host created with ID: QmbAUznbz2YYuVRwc2Kz2Df6CrhYHFo4MNWskhf3FdrnyY
2025/08/10 18:00:35 Listen addresses: [/ip4/127.0.0.1/tcp/39737 /ip4/172.31.233.13/tcp/39737 /ip6/::1/tcp/46365]
2025/08/10 18:00:35 No bootstrap peers configured
2025/08/10 18:00:35 DHT initialized in auto mode
2025/08/10 18:00:35 mDNS discovery initialized
2025/08/10 18:00:35 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:35 Rendezvous discovery initialized
2025/08/10 18:00:35 Hybrid discovery strategy initialized
2025/08/10 18:00:36 P2P node initialized with ID: QmbAUznbz2YYuVRwc2Kz2Df6CrhYHFo4MNWskhf3FdrnyY
2025/08/10 18:00:36 Starting P2P node...
2025/08/10 18:00:36 Starting discovery engine with 5 strategies
2025/08/10 18:00:36 Discovery engine started
2025/08/10 18:00:36 Starting resource advertiser
2025/08/10 18:00:36 Resource advertiser started
2025/08/10 18:00:36 Starting content router
2025/08/10 18:00:36 Content router started
2025/08/10 18:00:36 P2P node started successfully
2025/08/10 18:00:36 Node ID: QmbAUznbz2YYuVRwc2Kz2Df6CrhYHFo4MNWskhf3FdrnyY
2025/08/10 18:00:36 Listen addresses: [/ip4/127.0.0.1/tcp/39737 /ip4/172.31.233.13/tcp/39737 /ip6/::1/tcp/46365]
    node_test.go:520: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:520
        	Error:      	"Node QmbAUznbz2YYuVRwc2Kz2Df6CrhYHFo4MNWskhf3FdrnyY: Started=true, Uptime=0s, Peers=0, Addrs=[/ip4/127.0.0.1/tcp/39737 /ip4/172.31.233.13/tcp/39737 /ip6/::1/tcp/46365]" does not contain "\x12 \xbe\x8d#݈d\xb0\xaa\x8fHdx\x9e\x01L\xd1*\xe7\x13f%\xf7:D\x9c\x8a#\xf4\x1c\x92\xe4K"
        	Test:       	TestNode_StringRepresentation
2025/08/10 18:00:36 Stopping P2P node...
2025/08/10 18:00:36 Stopping discovery engine
2025/08/10 18:00:36 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:36 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:36 Discovery engine stopped
2025/08/10 18:00:36 Stopping resource advertiser
2025/08/10 18:00:36 Resource advertiser stopped
2025/08/10 18:00:36 Stopping content router
2025/08/10 18:00:36 Content router stopped
2025/08/10 18:00:36 NAT traversal manager closed
2025/08/10 18:00:36 P2P node stopped
--- FAIL: TestNode_StringRepresentation (1.10s)
=== RUN   TestNode_ConcurrentOperations
2025/08/10 18:00:36 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:36 Added STUN server: stun1.l.google.com:19302
2025/08/10 18:00:36 Added STUN server: stun2.l.google.com:19302
2025/08/10 18:00:36 P2P host created with ID: QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98
2025/08/10 18:00:36 Listen addresses: [/ip4/127.0.0.1/tcp/34923 /ip4/172.31.233.13/tcp/34923 /ip6/::1/tcp/43703]
2025/08/10 18:00:36 No bootstrap peers configured
2025/08/10 18:00:36 DHT initialized in auto mode
2025/08/10 18:00:36 mDNS discovery initialized
2025/08/10 18:00:36 Bootstrap discovery initialized with 0 peers
2025/08/10 18:00:36 Rendezvous discovery initialized
2025/08/10 18:00:36 Hybrid discovery strategy initialized
2025/08/10 18:00:37 P2P node initialized with ID: QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98
2025/08/10 18:00:37 Starting P2P node...
2025/08/10 18:00:37 Starting discovery engine with 5 strategies
2025/08/10 18:00:37 Discovery engine started
2025/08/10 18:00:37 Starting resource advertiser
2025/08/10 18:00:37 Resource advertiser started
2025/08/10 18:00:37 Starting content router
2025/08/10 18:00:37 Content router started
2025/08/10 18:00:37 P2P node started successfully
2025/08/10 18:00:37 Node ID: QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98
2025/08/10 18:00:37 Listen addresses: [/ip4/127.0.0.1/tcp/34923 /ip4/172.31.233.13/tcp/34923 /ip6/::1/tcp/43703]
==================
WARNING: DATA RACE
Read at 0x00c000d021b8 by goroutine 2791:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).GetStatus()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:750 +0x3a4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations.func3()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:569 +0x49

Previous write at 0x00c000d021b8 by goroutine 2789:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).SetCapabilities()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:469 +0x88
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:547 +0x96

Goroutine 2791 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:567 +0x41c
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:529 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 2789 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:541 +0x24a
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:529 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
==================
WARNING: DATA RACE
Read at 0x00c000d021c0 by goroutine 2791:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).GetStatus()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:751 +0x424
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations.func3()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:569 +0x49

Previous write at 0x00c000d021c0 by goroutine 2790:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).SetResourceMetrics()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:487 +0x88
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations.func2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:560 +0x44

Goroutine 2791 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:567 +0x41c
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:529 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 2790 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:554 +0x312
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:439 +0x1dca
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:349 +0xbf3
  github.com/libp2p/go-libp2p/p2p/host/basic.NewHost()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/p2p/host/basic/basic_host.go:210 +0x23a1
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:318 +0xa94
  github.com/libp2p/go-libp2p/config.(*Config).makeSwarm()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:158 +0x1ad
  github.com/libp2p/go-libp2p/config.(*Config).NewNode()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/config/config.go:309 +0x574
  github.com/libp2p/go-libp2p.NewWithoutDefaults()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:67 +0xd8
  github.com/libp2p/go-libp2p.New()
      /home/kp/go/pkg/mod/github.com/libp2p/go-libp2p@v0.32.0/libp2p.go:53 +0x1b64
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host.NewP2PHost()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/host/host.go:264 +0x19b2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.(*P2PNode).initializeComponents()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:249 +0xf3
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.NewP2PNode()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node.go:181 +0x85d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p.TestNode_ConcurrentOperations()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/node_test.go:529 +0x84
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 1.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 1.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 2.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 2.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 3.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 3.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 4.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 4.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 5.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 5.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 6.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 6.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 7.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 7.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 8.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 8.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 9.00 CPU
2025/08/10 18:00:37 Setting capabilities of type *resources.NodeCapabilities
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 9.00 CPU
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/resources/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Failed to store advertisement with key /ollamacron/nodes/QmdLPn1BKHsNKZvweckE5DjSVDbzvpwTnWdMGSt4aqtE98: invalid record keytype
2025/08/10 18:00:37 Advertised resources: 0 models, 0 GPUs, 10.00 CPU
2025/08/10 18:00:37 Stopping P2P node...
2025/08/10 18:00:37 Stopping discovery engine
2025/08/10 18:00:37 NAT discovery failed: NAT discovery failed: discovery timeout: context canceled
2025/08/10 18:00:37 Failed to detect local geographic location: failed to detect local location: Get "http://ip-api.com/json/": context canceled
2025/08/10 18:00:37 Discovery engine stopped
2025/08/10 18:00:37 Stopping resource advertiser
2025/08/10 18:00:37 Resource advertiser stopped
2025/08/10 18:00:37 Stopping content router
2025/08/10 18:00:37 Content router stopped
2025/08/10 18:00:37 NAT traversal manager closed
2025/08/10 18:00:37 P2P node stopped
    testing.go:1490: race detected during execution of test
--- FAIL: TestNode_ConcurrentOperations (1.82s)
FAIL
coverage: 51.8% of statements
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p	35.396s
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/discovery [build failed]
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/host [build failed]
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/messaging		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/monitoring		coverage: 0.0% of statements
=== RUN   TestNATTraversalManager_EstablishRelayConnection
2025/08/10 18:00:00 Added TURN server: turn.example.com:3478 (udp)
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_EstablishRelayConnection (0.08s)
=== RUN   TestNATTraversalManager_CreateRelayConnection
    nat_comprehensive_test.go:49: 
        	Error Trace:	/home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_comprehensive_test.go:49
        	Error:      	An error is expected but got nil.
        	Test:       	TestNATTraversalManager_CreateRelayConnection
2025/08/10 18:00:00 NAT traversal manager closed
--- FAIL: TestNATTraversalManager_CreateRelayConnection (0.00s)
=== RUN   TestNATTraversalManager_DiscoverWithSTUNServer
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_DiscoverWithSTUNServer (0.00s)
=== RUN   TestNATTraversalManager_PerformNATDiscovery
2025/08/10 18:00:00 Added STUN server: stun1.example.com:19302
2025/08/10 18:00:00 Added STUN server: stun2.example.com:19302
==================
WARNING: DATA RACE
Read at 0x00c0002824d0 by goroutine 22:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xe4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0002824d0 by goroutine 23:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xfc
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 22 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversalManager_PerformNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_comprehensive_test.go:87 +0x3e4
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 23 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversalManager_PerformNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_comprehensive_test.go:87 +0x3e4
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
==================
WARNING: DATA RACE
Read at 0x00c0002824e0 by goroutine 22:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:369 +0x2c4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0002824e0 by goroutine 23:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:369 +0x2e5
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 22 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversalManager_PerformNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_comprehensive_test.go:87 +0x3e4
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 23 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversalManager_PerformNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_comprehensive_test.go:87 +0x3e4
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
2025/08/10 18:00:00 NAT traversal manager closed
    testing.go:1490: race detected during execution of test
--- FAIL: TestNATTraversalManager_PerformNATDiscovery (0.08s)
=== RUN   TestNATTraversalManager_AttemptHolePunching
    nat_comprehensive_test.go:101: Hole punching test requires multiaddr implementation
2025/08/10 18:00:00 NAT traversal manager closed
--- SKIP: TestNATTraversalManager_AttemptHolePunching (0.00s)
=== RUN   TestNATTraversalManager_TURNServerHealthChecking
2025/08/10 18:00:00 Added TURN server: turn.example.com:3478 (tcp)
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial tcp: lookup turn.example.com: no such host
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_TURNServerHealthChecking (0.07s)
=== RUN   TestNATTraversalManager_STUNServerHealthChecking
2025/08/10 18:00:00 Added STUN server: stun.example.com:19302
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_STUNServerHealthChecking (0.07s)
=== RUN   TestNATTraversalManager_CheckServerHealth
2025/08/10 18:00:00 Added STUN server: stun.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn.example.com:3478 (udp)
    nat_comprehensive_test.go:163: Server health check completed
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_CheckServerHealth (0.05s)
=== RUN   TestRelayConnection_Usage
--- PASS: TestRelayConnection_Usage (0.00s)
=== RUN   TestDiscoveryResult_Caching
--- PASS: TestDiscoveryResult_Caching (0.00s)
=== RUN   TestTraversalConfig_Validation
--- PASS: TestTraversalConfig_Validation (0.00s)
=== RUN   TestTraversalMetrics_Comprehensive
--- PASS: TestTraversalMetrics_Comprehensive (0.00s)
=== RUN   TestNATTraversalManager_ConcurrentOperations
2025/08/10 18:00:00 Added STUN server: stun1.example.com:19302
2025/08/10 18:00:00 Added STUN server: stun2.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn1.example.com:3478 (udp)
2025/08/10 18:00:00 Added TURN server: turn2.example.com:3478 (tcp)
    nat_comprehensive_test.go:298: Concurrent operations completed successfully
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_ConcurrentOperations (0.00s)
=== RUN   TestNATTraversalManager_EdgeCases
2025/08/10 18:00:00 NAT traversal manager closed
2025/08/10 18:00:00 NAT traversal manager closed
2025/08/10 18:00:00 NAT traversal manager closed
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_EdgeCases (0.00s)
=== RUN   TestParseInt
--- PASS: TestParseInt (0.00s)
=== RUN   TestNATTraversalManager_Performance
2025/08/10 18:00:00 Added STUN server: stun0.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn0.example.com:3478 (udp)
2025/08/10 18:00:00 Added STUN server: stun1.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn1.example.com:3478 (udp)
2025/08/10 18:00:00 Added STUN server: stun2.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn2.example.com:3478 (udp)
2025/08/10 18:00:00 Added STUN server: stun3.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn3.example.com:3478 (udp)
2025/08/10 18:00:00 Added STUN server: stun4.example.com:19302
2025/08/10 18:00:00 Added TURN server: turn4.example.com:3478 (udp)
    nat_comprehensive_test.go:366: 100 operations completed in 439.083µs
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversalManager_Performance (0.00s)
=== RUN   TestNATTraversal_FullConeScenario
    nat_integration_test.go:43: Full Cone NAT scenario: Public address 203.0.113.1:12345, Relay required: false
2025/08/10 18:00:00 NAT traversal manager closed
--- PASS: TestNATTraversal_FullConeScenario (0.00s)
=== RUN   TestNATTraversal_RestrictedConeScenario
2025/08/10 18:00:00 Sent hole punch packet 0 to 192.0.2.1:8080
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
==================
WARNING: DATA RACE
Write at 0x00c000134068 by goroutine 57:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkTURNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:701 +0x2ed
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x44

Previous write at 0x00c000134068 by goroutine 63:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkTURNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:701 +0x2ed
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x44

2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
Goroutine 57 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x3e4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 63 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x3e4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33
==================
==================
WARNING: DATA RACE
Write at 0x00c0001105e8 by goroutine 56:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:681 +0x2b7
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Previous write at 0x00c0001105e8 by goroutine 54:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:681 +0x2b7
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Goroutine 56 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 54 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33
==================
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
==================
WARNING: DATA RACE
Write at 0x00c0001105e0 by goroutine 56:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:683 +0x335
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Previous write at 0x00c0001105e0 by goroutine 54:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:683 +0x335
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Goroutine 56 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 54 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33
==================
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
==================
WARNING: DATA RACE
Write at 0x00c000134060 by goroutine 60:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkTURNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:703 +0x36b
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x44

Previous write at 0x00c000134060 by goroutine 57:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkTURNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:703 +0x36b
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap2()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x44

Goroutine 60 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x3e4
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 57 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:667 +0x3e4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33
==================
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
2025/08/10 18:00:00 STUN server stun.example.com:19302 is unavailable: dial udp: lookup stun.example.com: no such host
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
2025/08/10 18:00:00 TURN server turn.example.com:3478 is unavailable: dial udp: lookup turn.example.com: no such host
2025/08/10 18:00:01 Sent hole punch packet 1 to 192.0.2.1:8080
2025/08/10 18:00:03 Sent hole punch packet 2 to 192.0.2.1:8080
2025/08/10 18:00:07 Sent hole punch packet 3 to 192.0.2.1:8080
2025/08/10 18:00:15 Sent hole punch packet 4 to 192.0.2.1:8080
    nat_integration_test.go:69: Restricted Cone NAT scenario: Restricted Cone
2025/08/10 18:00:15 NAT traversal manager closed
    testing.go:1490: race detected during execution of test
--- FAIL: TestNATTraversal_RestrictedConeScenario (15.01s)
=== RUN   TestNATTraversal_SymmetricNATScenario
2025/08/10 18:00:15 Added TURN server: turn.example.com:3478 (udp)
2025/08/10 18:00:15 Added TURN server: turn2.example.com:3478 (tcp)
    nat_integration_test.go:93: Symmetric NAT scenario: Best TURN server turn.example.com:3478
2025/08/10 18:00:15 NAT traversal manager closed
--- PASS: TestNATTraversal_SymmetricNATScenario (0.00s)
=== RUN   TestNATTraversal_BlockedScenario
    nat_integration_test.go:110: Blocked NAT scenario: Relay required: true
2025/08/10 18:00:15 NAT traversal manager closed
--- PASS: TestNATTraversal_BlockedScenario (0.00s)
=== RUN   TestNATTraversal_OpenNetworkScenario
    nat_integration_test.go:133: Open network scenario: Direct connections available
2025/08/10 18:00:15 NAT traversal manager closed
--- PASS: TestNATTraversal_OpenNetworkScenario (0.00s)
=== RUN   TestNATTraversal_STUNServerFailover
2025/08/10 18:00:15 Added STUN server: nonexistent1.example.com:19302
2025/08/10 18:00:15 Added STUN server: nonexistent2.example.com:19302
2025/08/10 18:00:15 Added STUN server: stun.l.google.com:19302
==================
WARNING: DATA RACE
Write at 0x00c0002c22a0 by goroutine 111:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xfc
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Previous write at 0x00c0002c22a0 by goroutine 109:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xfc
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 111 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x1c7
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_STUNServerFailover()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:154 +0x446
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 109 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x1c7
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_STUNServerFailover()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:154 +0x446
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
    nat_integration_test.go:163: NAT discovery failed (expected in test env): NAT discovery failed: discovery timeout: context deadline exceeded
2025/08/10 18:00:17 NAT traversal manager closed
    testing.go:1490: race detected during execution of test
--- FAIL: TestNATTraversal_STUNServerFailover (2.00s)
=== RUN   TestNATTraversal_TURNServerFailover
2025/08/10 18:00:17 Added TURN server: turn1.example.com:3478 (udp)
2025/08/10 18:00:17 Added TURN server: turn2.example.com:3478 (udp)
2025/08/10 18:00:17 Added TURN server: turn3.example.com:3478 (tcp)
    nat_integration_test.go:193: TURN failover: Selected turn2.example.com:3478 (priority 90)
2025/08/10 18:00:17 NAT traversal manager closed
--- PASS: TestNATTraversal_TURNServerFailover (0.00s)
=== RUN   TestNATTraversal_ConnectionPooling
2025/08/10 18:00:18 Cleaned up expired relay connection: test-server:3478
    nat_integration_test.go:232: Connection pool cleanup verified
2025/08/10 18:00:18 NAT traversal manager closed
--- PASS: TestNATTraversal_ConnectionPooling (0.15s)
=== RUN   TestNATTraversal_ConcurrentDiscovery
2025/08/10 18:00:18 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:18 Added STUN server: stun1.l.google.com:19302
==================
WARNING: DATA RACE
Read at 0x00c000014d50 by goroutine 129:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:282 +0x228
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:261 +0x118

Previous write at 0x00c000014d50 by goroutine 133:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:282 +0x246
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:261 +0x118

Goroutine 129 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:255 +0x15d
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 133 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:255 +0x15d
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
==================
WARNING: DATA RACE
Write at 0x00c000014d50 by goroutine 129:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:282 +0x246
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:261 +0x118

Previous write at 0x00c000014d50 by goroutine 131:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:282 +0x246
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:261 +0x118

Goroutine 129 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:255 +0x15d
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 131 (finished) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:255 +0x15d
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44
==================
    nat_integration_test.go:283: Concurrent discovery: 0/5 successful
==================
WARNING: DATA RACE
Read at 0x00c000014d20 by goroutine 126:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:287 +0x579
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Previous write at 0x00c000014d20 by goroutine 140:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).discoverWithSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:359 +0xfc
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:327 +0x6e
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:333 +0x41

Goroutine 126 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164

Goroutine 140 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).performNATDiscovery()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:326 +0x558
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).DiscoverNATType()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:280 +0x1c7
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestNATTraversal_ConcurrentDiscovery.func1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/nat_integration_test.go:261 +0x118
==================
2025/08/10 18:00:20 NAT traversal manager closed
    testing.go:1490: race detected during execution of test
--- FAIL: TestNATTraversal_ConcurrentDiscovery (2.00s)
=== RUN   TestNATTraversal_ExponentialBackoff
    nat_integration_test.go:323: Exponential backoff calculation verified
2025/08/10 18:00:20 NAT traversal manager closed
--- PASS: TestNATTraversal_ExponentialBackoff (0.00s)
=== RUN   TestNATTraversal_HolePunchingWithBackoff
2025/08/10 18:00:20 Sent hole punch packet 0 to 192.0.2.1:8080
2025/08/10 18:00:20 Sent hole punch packet 1 to 192.0.2.1:8080
2025/08/10 18:00:22 Sent hole punch packet 2 to 192.0.2.1:8080
    nat_integration_test.go:354: Hole punching with backoff completed in 301.656748ms
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATTraversal_HolePunchingWithBackoff (0.30s)
=== RUN   TestNATTraversal_MetricsAccuracy
    nat_integration_test.go:387: Metrics accuracy verified
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATTraversal_MetricsAccuracy (0.00s)
=== RUN   TestNATTraversal_CacheEffectiveness
2025/08/10 18:00:22 Added STUN server: 127.0.0.1:19302
    nat_integration_test.go:432: Cache test: Hit=5.937µs, Miss=675.284µs
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATTraversal_CacheEffectiveness (0.25s)
=== RUN   TestNATTraversalManager_Creation
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATTraversalManager_Creation (0.00s)
=== RUN   TestNATTraversalManager_AddServers
2025/08/10 18:00:22 Added STUN server: stun.l.google.com:19302
2025/08/10 18:00:22 Added TURN server: turn.example.com:3478 (udp)
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATTraversalManager_AddServers (0.00s)
=== RUN   TestNATType_String
=== RUN   TestNATType_String/Open
=== RUN   TestNATType_String/Full_Cone
=== RUN   TestNATType_String/Restricted_Cone
=== RUN   TestNATType_String/Port_Restricted_Cone
=== RUN   TestNATType_String/Symmetric
=== RUN   TestNATType_String/Blocked
=== RUN   TestNATType_String/Unknown
--- PASS: TestNATType_String (0.00s)
    --- PASS: TestNATType_String/Open (0.00s)
    --- PASS: TestNATType_String/Full_Cone (0.00s)
    --- PASS: TestNATType_String/Restricted_Cone (0.00s)
    --- PASS: TestNATType_String/Port_Restricted_Cone (0.00s)
    --- PASS: TestNATType_String/Symmetric (0.00s)
    --- PASS: TestNATType_String/Blocked (0.00s)
    --- PASS: TestNATType_String/Unknown (0.00s)
=== RUN   TestDefaultTraversalConfig
--- PASS: TestDefaultTraversalConfig (0.00s)
=== RUN   TestNATDiscovery_NoServers
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATDiscovery_NoServers (0.00s)
=== RUN   TestNATDiscovery_WithServers
2025/08/10 18:00:22 Added STUN server: 127.0.0.1:19302
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATDiscovery_WithServers (0.00s)
=== RUN   TestNATDiscovery_Caching
2025/08/10 18:00:22 Added STUN server: 127.0.0.1:19302
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestNATDiscovery_Caching (0.15s)
=== RUN   TestIsRelayRequired
=== RUN   TestIsRelayRequired/Open
=== RUN   TestIsRelayRequired/Full_Cone
=== RUN   TestIsRelayRequired/Restricted_Cone
=== RUN   TestIsRelayRequired/Port_Restricted_Cone
=== RUN   TestIsRelayRequired/Symmetric
=== RUN   TestIsRelayRequired/Blocked
=== RUN   TestIsRelayRequired/Unknown
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestIsRelayRequired (0.00s)
    --- PASS: TestIsRelayRequired/Open (0.00s)
    --- PASS: TestIsRelayRequired/Full_Cone (0.00s)
    --- PASS: TestIsRelayRequired/Restricted_Cone (0.00s)
    --- PASS: TestIsRelayRequired/Port_Restricted_Cone (0.00s)
    --- PASS: TestIsRelayRequired/Symmetric (0.00s)
    --- PASS: TestIsRelayRequired/Blocked (0.00s)
    --- PASS: TestIsRelayRequired/Unknown (0.00s)
=== RUN   TestSelectBestTURNServer
2025/08/10 18:00:22 Added TURN server: turn1.example.com:3478 (udp)
2025/08/10 18:00:22 Added TURN server: turn2.example.com:3478 (udp)
2025/08/10 18:00:22 Added TURN server: turn3.example.com:3478 (udp)
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestSelectBestTURNServer (0.00s)
=== RUN   TestMultiaddrToNetAddr
    traversal_test.go:228: Skipping multiaddr test - requires libp2p multiaddr implementation
2025/08/10 18:00:22 NAT traversal manager closed
--- SKIP: TestMultiaddrToNetAddr (0.00s)
=== RUN   TestHolePunching_Configuration
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestHolePunching_Configuration (0.00s)
=== RUN   TestConnectionOptimization_EarlySuccess
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestConnectionOptimization_EarlySuccess (0.00s)
=== RUN   TestExponentialBackoff_Implementation
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestExponentialBackoff_Implementation (0.00s)
=== RUN   TestMetricsTracking
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestMetricsTracking (0.00s)
=== RUN   TestConnectionPoolManagement
2025/08/10 18:00:22 Cleaned up expired relay connection: test-conn
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestConnectionPoolManagement (0.00s)
=== RUN   TestServerHealthChecking
2025/08/10 18:00:22 Added STUN server: 127.0.0.1:19302
==================
WARNING: DATA RACE
Read at 0x00c00060c9c0 by goroutine 227:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:658 +0x84
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Previous write at 0x00c00060c9c0 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:244 +0x2b4
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 227 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x70d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:351 +0x2e8
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
==================
WARNING: DATA RACE
Read at 0x00c000614010 by goroutine 227:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:658 +0xcc
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Previous write at 0x00c000614010 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:244 +0x264
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 227 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x70d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:351 +0x2e8
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
==================
WARNING: DATA RACE
Read at 0x00c00063e0a8 by goroutine 227:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:659 +0x105
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Previous write at 0x00c00063e0a8 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:241 +0x1ab
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 227 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x70d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:351 +0x2e8
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
==================
WARNING: DATA RACE
Read at 0x00c00063e060 by goroutine 229:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:678 +0x14d
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Previous write at 0x00c00063e060 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:236 +0xca
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 229 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
==================
WARNING: DATA RACE
Read at 0x00c00063e070 by goroutine 229:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:678 +0x1a9
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Previous write at 0x00c00063e070 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:236 +0xca
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 229 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
==================
WARNING: DATA RACE
Write at 0x00c00063e0a0 by goroutine 229:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:689 +0x4f2
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x44

Previous write at 0x00c00063e0a0 by goroutine 226:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).AddSTUNServer()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:236 +0xca
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.TestServerHealthChecking()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal_test.go:355 +0x36b
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x44

Goroutine 229 (running) created at:
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).checkServerHealth()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:660 +0x224
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.(*NATTraversalManager).serverHealthChecker()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:650 +0x235
  github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat.NewNATTraversalManager.gowrap1()
      /home/kp/ollamamax/ollama-distributed/pkg/p2p/nat/traversal.go:228 +0x33

Goroutine 226 (running) created at:
  testing.(*T).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /home/kp/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.5.linux-amd64/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:187 +0x164
==================
2025/08/10 18:00:22 NAT traversal manager closed
    testing.go:1490: race detected during execution of test
--- FAIL: TestServerHealthChecking (0.10s)
=== RUN   TestFullConeNATScenario
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestFullConeNATScenario (0.00s)
=== RUN   TestRestrictedConeNATScenario
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestRestrictedConeNATScenario (0.00s)
=== RUN   TestSymmetricNATScenario
2025/08/10 18:00:22 NAT traversal manager closed
--- PASS: TestSymmetricNATScenario (0.00s)
FAIL
coverage: 74.4% of statements
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/nat	20.379s
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/protocols		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/resources		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/routing		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/security		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/p2p/turn		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/performance		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/pool		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/proxy		coverage: 0.0% of statements
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler [build failed]
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/distributed		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/distribution		coverage: 0.0% of statements
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/fault_tolerance [build failed]
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/integration		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/loadbalancer		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/orchestration		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/partitioning		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/resource		coverage: 0.0% of statements
?   	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/scheduler/types	[no test files]
FAIL	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/security [build failed]
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/testing		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/types		coverage: 0.0% of statements
	github.com/khryptorgraphics/ollamamax/ollama-distributed/pkg/web		coverage: 0.0% of statements
FAIL
